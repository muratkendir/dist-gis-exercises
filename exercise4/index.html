
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../exercise3/">
      
      
        <link rel="next" href="../samples_for_discussion/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>Exercise 4 (Web Map) - dist-gis-exercises (Educational Python Notebooks)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9f615399.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#geospatial-web-services-web-mapping-in-2d-3d" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dist-gis-exercises (Educational Python Notebooks)" class="md-header__button md-logo" aria-label="dist-gis-exercises (Educational Python Notebooks)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dist-gis-exercises (Educational Python Notebooks)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercise 4 (Web Map)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dist-gis-exercises (Educational Python Notebooks)" class="md-nav__button md-logo" aria-label="dist-gis-exercises (Educational Python Notebooks)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    dist-gis-exercises (Educational Python Notebooks)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../exercise2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 2 (Python Intro)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../exercise3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 3 (SDIs)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Exercise 4 (Web Map)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Exercise 4 (Web Map)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-accessing-wms-service-with-python" class="md-nav__link">
    1) Accessing WMS service with Python
  </a>
  
    <nav class="md-nav" aria-label="1) Accessing WMS service with Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-examine-a-wms-service-with-owslib" class="md-nav__link">
    1.1) Examine a WMS service with OWSLib
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-add-a-wms-layer-to-jupyter-notebook-using-ipyleaflet" class="md-nav__link">
    1.2) Add a WMS layer to Jupyter Notebook using ipyLeaflet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-accessing-wms-services-from-javascript-libraries" class="md-nav__link">
    2) Accessing WMS services from JavaScript libraries
  </a>
  
    <nav class="md-nav" aria-label="2) Accessing WMS services from JavaScript libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-adding-wms-services-to-openlayers" class="md-nav__link">
    2.1) Adding WMS services to OpenLayers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-adding-wms-services-to-cesiumjs" class="md-nav__link">
    2.2) Adding WMS services to CesiumJS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-using-ogc-feature-api-as-geojson-source-in-cesium" class="md-nav__link">
    2.3) Using OGC Feature API as GeoJSON source in Cesium
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-fundamentals-of-3d-visualization-in-cesiumjs" class="md-nav__link">
    3) Fundamentals of 3D Visualization in CesiumJS
  </a>
  
    <nav class="md-nav" aria-label="3) Fundamentals of 3D Visualization in CesiumJS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-adding-3d-buildings-to-the-cesium-viewer" class="md-nav__link">
    3.1) Adding 3D Buildings to the Cesium viewer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-adding-terrain-to-the-cesium-viewer" class="md-nav__link">
    3.2) Adding terrain to the Cesium viewer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-adding-custom-terrain-models-3dtiles-and-wms-services-to-cesium" class="md-nav__link">
    3.3) Adding custom terrain models, 3DTiles and WMS services to Cesium
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../samples_for_discussion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OGC Service Samples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../essentials_of_web_mapping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Essentials of Web Mapping
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virtual Env. Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Virtual Env. Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../install_w_pip_on_win/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows w PIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../install_w_pip_on_lnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux w PIP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-accessing-wms-service-with-python" class="md-nav__link">
    1) Accessing WMS service with Python
  </a>
  
    <nav class="md-nav" aria-label="1) Accessing WMS service with Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-examine-a-wms-service-with-owslib" class="md-nav__link">
    1.1) Examine a WMS service with OWSLib
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-add-a-wms-layer-to-jupyter-notebook-using-ipyleaflet" class="md-nav__link">
    1.2) Add a WMS layer to Jupyter Notebook using ipyLeaflet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-accessing-wms-services-from-javascript-libraries" class="md-nav__link">
    2) Accessing WMS services from JavaScript libraries
  </a>
  
    <nav class="md-nav" aria-label="2) Accessing WMS services from JavaScript libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-adding-wms-services-to-openlayers" class="md-nav__link">
    2.1) Adding WMS services to OpenLayers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-adding-wms-services-to-cesiumjs" class="md-nav__link">
    2.2) Adding WMS services to CesiumJS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-using-ogc-feature-api-as-geojson-source-in-cesium" class="md-nav__link">
    2.3) Using OGC Feature API as GeoJSON source in Cesium
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-fundamentals-of-3d-visualization-in-cesiumjs" class="md-nav__link">
    3) Fundamentals of 3D Visualization in CesiumJS
  </a>
  
    <nav class="md-nav" aria-label="3) Fundamentals of 3D Visualization in CesiumJS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-adding-3d-buildings-to-the-cesium-viewer" class="md-nav__link">
    3.1) Adding 3D Buildings to the Cesium viewer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-adding-terrain-to-the-cesium-viewer" class="md-nav__link">
    3.2) Adding terrain to the Cesium viewer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-adding-custom-terrain-models-3dtiles-and-wms-services-to-cesium" class="md-nav__link">
    3.3) Adding custom terrain models, 3DTiles and WMS services to Cesium
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="geospatial-web-services-web-mapping-in-2d-3d">Geospatial Web Services &amp; Web Mapping in 2D / 3D</h1>
<p><img align="right" width=190 height=100 src="../images/TUM_Logo_blau_rgb_p.png"/></p>
<blockquote>
Munich Technical University || Chair of Geoinformatics </br></br>
Murat Kendir, Prof. Thomas Kolbe || murat.kendir@tum.de
</blockquote>

<ul>
<li>In this exercise, you will learn how to use geospatial web services in your applications or web views and how to use the operations supported by the web service. </li>
<li>In the previous exercise, we selected a few web map services from the given Spatial Data Infrastructures (SDIs) and examined the responses using GIS software. </li>
<li>Now you will learn how to connect to and interact with geospatial web services with the help of some popular libraries. Additionally, you will learn how to use 2D and 3D JavaScript libraries which supports and visualize 2D or 3D datasets or web services.</li>
</ul>
<h2 id="1-accessing-wms-service-with-python">1) Accessing WMS service with Python</h2>
<p>OWSLib is one of the OGC compliant web service client and it supports OGC interface standards.
Before using the OWSLib consider the following steps:
- If you are not working wholetale.org, please install OWSLib to your current python environment using : <strong>pip install OWSLib</strong>
- Then you need to import the OWSLib library into your code.
- Check the following site to get more information about the OWSLib:
  - <a href="https://owslib.readthedocs.io/en/latest/">https://owslib.readthedocs.io/en/latest/</a> </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">owslib</span>
</code></pre></div>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Check available contents (packages + classes) in the library with following code:
<code>help(owslib)</code></li>
</ul>
<p>You can specify a class or package to reduce the loaded library content in your code.
There are multiple ways to do so:
- First Option: <code>from owslib import wms</code>
  - Imports only wms module from owslib package
  - Type: <code>help(wms)</code>
- Second Option: <code>import owslib.wms</code>
  - Again, it calls only wms module from owslib package
  - Type: <code>help(owslib.wms)</code>
- Another option to import only the relevant function: <code>from owslib.wms import WebMapService as any_shorten_form</code>
  - Imports only WebMapService function in the wms module and assigns a custom alias to it.
  - Type: <code>help(any_shorten_form)</code></p>
<h3 id="11-examine-a-wms-service-with-owslib">1.1) Examine a WMS service with OWSLib</h3>
<p>Select any Web Map Service (WMS) from your previous work, or select a random WMS that covers the city of Hamburg in whole or in part. (If you want to add a random WMS, revisit the <a href="https://transparenz.hamburg.de">Hamburg TransparenzPortal</a> or <a href="https://geoportal.de">geoportal.de</a> or <a href="https://inspire-geoportal.ec.europa.eu">INSPIRE Geoportal</a> websites to search for the appropriate web service.)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Decide a way to import the library. </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kn">from</span> <span class="nn">owslib.wms</span> <span class="kn">import</span> <span class="n">WebMapService</span> <span class="k">as</span> <span class="n">mywms</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># help(mywms)</span>
</code></pre></div>
<p>If you type help(mywms), you will see an explanation of the function as below.</p>
<p>WebMapService(<strong>url</strong>, version='1.1.1', xml=None, username=None, ...)</p>
<p>Notice that only "url" parameter is not assigned to a value. This means that the only mandatory parameter is the "url" and all other parameters will be accepted with their default values unless their values are specified.</p>
<p>Now, test your selected WMS with the imported WebMapService function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># mytest = mywms(&#39;https://geodienste.hamburg.de/HH_WMS_DGM1&#39;)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1"># The website serves the metadata of the WMS highlights that</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># the recommended version is &quot;1.3.0&quot;. So we can specify that:</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">mytest</span> <span class="o">=</span> <span class="n">mywms</span><span class="p">(</span><span class="s1">&#39;https://geodienste.hamburg.de/HH_WMS_DGM1&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;1.3.0&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Now, you can use "the built-in functions" to know more about the returned object:
<code>print(mytest)</code> / <code>type(mytest)</code> / <code>help(mytest)</code> / <code>dir(mytest)</code>
If you are sure about the data is an iterable object (tuple, set, list, dictionary) then you can use also "list" function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">list</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1"># Alternatively: print(mytest.contents.keys())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[&#39;HH_WMS_DGM1&#39;, &#39;WMS_DGM1_HAMBURG&#39;, &#39;WMS_DGM1_farbig&#39;, &#39;WMS_DGM1_farbig_10000&#39;]
</code></pre></div>
<ul>
<li>Check the available methods by typing dir(mytest).</li>
<li>You may notice the "operations" method in the list.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">list</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[&lt;owslib.map.wms130.OperationMetadata at 0x745d0c2c70e0&gt;,
 &lt;owslib.map.wms130.OperationMetadata at 0x745d0c2c7980&gt;,
 &lt;owslib.map.wms130.OperationMetadata at 0x745d0c2c7ad0&gt;,
 &lt;owslib.map.wms130.OperationMetadata at 0x745d0c2c7b60&gt;,
 &lt;owslib.map.wms130.OperationMetadata at 0x745d0c2c7bf0&gt;,
 &lt;owslib.map.wms130.OperationMetadata at 0x745d0c2c7c80&gt;]
</code></pre></div>
<ul>
<li>As operations stored as objects in a list (array), we can access them using list index (For Exp. mylist[0]). Then you can check the available methods or attributes in the class instance by typing <code>dir(mytest.operations[0])</code>. </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">print</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">operations</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="c1"># print(mytest.operations[0].formatOptions)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1"># print(mytest.operations[0].methods)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;class &#39;owslib.map.wms130.OperationMetadata&#39;&gt;
GetCapabilities
GetMap
GetFeatureInfo
DescribeLayer
GetLegendGraphic
GetStyles
</code></pre></div>
<ul>
<li>Alternatively, you can inspect the webservice using the "getServiceXML" method. Please note that the result will be returned as a binary file in XML format. This means that you have to consider the binary format if you want to store or read the returned object as a file. For example, we specified the file mode as "wb" (Write + Binary) in the following code, because the object "mytest.getServiceXML()" was in bytes format, not a string. </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># type(mytest.getServiceXML())</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># Specify your own relative or full path to save the XML file, if it is required.</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;responses/exr4/my_wms_servicexml.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_wms_xml</span><span class="p">:</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>        <span class="n">my_wms_xml</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">getServiceXML</span><span class="p">())</span>
</code></pre></div>
<ul>
<li>Check the saved XML file and try to find where the layers, bounding boxes or coordinate reference systems (CRSs) are defined.</li>
</ul>
<blockquote> Reminder: Firefox and Google Chrome browsers have some extensions to visiualize XML files in a "pretty" way. Otherwise you can open the XML file with your favorite text editor and search for a "pretty print" solution. (For Example: XMLTools extension is available in the Notepad++ plugin repository.)
</blockquote>

<ul>
<li>You can also send queries to get single images with predefined properties. To do that, you may need to expose more informaiton about the WMS service using following commands:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="p">[</span><span class="s1">&#39;WMS_DGM1_HAMBURG&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">crsOptions</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="p">[</span><span class="s1">&#39;WMS_DGM1_HAMBURG&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="p">[</span><span class="s1">&#39;WMS_DGM1_HAMBURG&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">styles</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">mytest</span><span class="o">.</span><span class="n">getOperationByName</span><span class="p">(</span><span class="s1">&#39;GetMap&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">formatOptions</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[&#39;EPSG:25833&#39;, &#39;EPSG:4647&#39;, &#39;EPSG:4258&#39;, &#39;EPSG:31467&#39;, &#39;EPSG:3044&#39;, &#39;EPSG:4326&#39;, &#39;EPSG:3857&#39;, &#39;EPSG:25832&#39;, &#39;CRS:84&#39;]

(8.482047, 53.385591, 10.355638, 53.941383)

{&#39;default&#39;: {&#39;title&#39;: &#39;default&#39;, &#39;legend&#39;: &#39;https://geodienste.hamburg.de/HH_WMS_DGM1?language=ger&amp;version=1.3.0&amp;service=WMS&amp;request=GetLegendGraphic&amp;sld_version=1.1.0&amp;layer=WMS_DGM1_HAMBURG&amp;format=image/png&amp;STYLE=default&#39;, &#39;legend_width&#39;: &#39;298&#39;, &#39;legend_height&#39;: &#39;865&#39;, &#39;legend_format&#39;: &#39;image/png&#39;}}

[&#39;image/png&#39;, &#39;image/jpeg&#39;, &#39;image/png; mode=8bit&#39;, &#39;image/vnd.jpeg-png&#39;, &#39;image/vnd.jpeg-png8&#39;, &#39;application/x-pdf&#39;, &#39;image/svg+xml&#39;, &#39;image/tiff&#39;, &#39;application/vnd.google-earth.kml+xml&#39;, &#39;application/vnd.google-earth.kmz&#39;, &#39;application/vnd.mapbox-vector-tile&#39;, &#39;application/x-protobuf&#39;, &#39;application/json&#39;]
</code></pre></div>
<ul>
<li>So, you are aware of capability of the WMS service and you can use this data to get data from the server:</li>
</ul>
<blockquote>Note that if you are using a different WMS service, you need to change the parameters given in the next example.</blockquote>

<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">img</span> <span class="o">=</span> <span class="n">mytest</span><span class="o">.</span><span class="n">getmap</span><span class="p">(</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;WMS_DGM1_HAMBURG&#39;</span><span class="p">],</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">srs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">,</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">53.4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">53.7</span><span class="p">],</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;image/jpeg&quot;</span><span class="p">)</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre></div>
<p><img alt="leaflet00" src="../images/exr4/output_23_0.jpg" /></p>
<h3 id="12-add-a-wms-layer-to-jupyter-notebook-using-ipyleaflet">1.2) Add a WMS layer to Jupyter Notebook using ipyLeaflet</h3>
<p>As you may know that leaflet is well known and simple-to-use web map library based on JavaScript. However, leaflet has also a widget implementation with Python Notebook which lets users to visualize their leaflet maps in notebook documents. To start using ipyleaflet, type <code>pip install ipyleaflet</code> in your python environment or follow the instructions to install ipyleaflet which are available in <a href="https://ipyleaflet.readthedocs.io/en/latest/installation/index.html">this website</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mf">53.547668</span><span class="p">,</span> <span class="mf">9.985685</span><span class="p">)</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">display</span><span class="p">(</span><span class="nb">map</span><span class="p">)</span>
</code></pre></div>
<p><img alt="leaflet01" src="../images/exr4/leaflet_01.png" />
<em>Screenshot taken on Jupyter Notebook</em></p>
<p>You can change the basemap by importing "basemaps" class into your code.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">basemaps</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">from</span> <span class="nn">ipywidgets.embed</span> <span class="kn">import</span> <span class="n">embed_minimal_html</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mf">53.547668</span><span class="p">,</span> <span class="mf">9.985685</span><span class="p">)</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="n">basemaps</span><span class="o">.</span><span class="n">CartoDB</span><span class="o">.</span><span class="n">Positron</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="c1">#display(map)</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/ipyleaflet_basemap.html&#39;</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="n">embed_minimal_html</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="p">[</span><span class="nb">map</span><span class="p">])</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;300px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/ipyleaflet_basemap.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<p>Now, we can add our WMS service to the leaflet widget by specifying the connectiond details.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">basemaps</span><span class="p">,</span> <span class="n">WMSLayer</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mf">53.547668</span><span class="p">,</span> <span class="mf">9.985685</span><span class="p">)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="n">basemaps</span><span class="o">.</span><span class="n">CartoDB</span><span class="o">.</span><span class="n">Positron</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">wms</span> <span class="o">=</span> <span class="n">WMSLayer</span><span class="p">(</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://geodienste.hamburg.de/HH_WMS_DGM1&#39;</span><span class="p">,</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>    <span class="n">layers</span><span class="o">=</span><span class="s1">&#39;WMS_DGM1_HAMBURG&#39;</span><span class="p">,</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>    <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="p">)</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="nb">map</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wms</span><span class="p">)</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="nb">map</span>
</code></pre></div>
<p><img alt="leaflet03" src="../images/exr4/leaflet_03.png" />
<em>Screenshot taken on Jupyter Notebook</em></p>
<p>Alternatively, you can call any WMS parameter including URL from the former OWSLib object.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mf">53.547668</span><span class="p">,</span> <span class="mf">9.985685</span><span class="p">)</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="n">basemaps</span><span class="o">.</span><span class="n">CartoDB</span><span class="o">.</span><span class="n">Positron</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="c1"># print(mytest.url) # Shows the URL of WMS Server</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="c1"># list(mytest.items()) # Lists the available layers</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="c1"># print(mytest.items()[0][0]) # Exposes one of the layers in WMS Server</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="c1"># print(mytest[&#39;HH_WMS_DGM1&#39;].name) # Takes only the name of the specified layer </span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="c1"># print(mytest.getOperationByName(&#39;GetMap&#39;).formatOptions[0]) </span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    <span class="c1"># Gives one of the possible image format</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="n">wms</span> <span class="o">=</span> <span class="n">WMSLayer</span><span class="p">(</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="n">url</span><span class="o">=</span> <span class="n">mytest</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    <span class="n">layers</span><span class="o">=</span><span class="n">mytest</span><span class="o">.</span><span class="n">items</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span class="nb">format</span><span class="o">=</span> <span class="n">mytest</span><span class="o">.</span><span class="n">getOperationByName</span><span class="p">(</span><span class="s1">&#39;GetMap&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">formatOptions</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>    <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="p">)</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="nb">map</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wms</span><span class="p">)</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="nb">map</span>
</code></pre></div>
<p><img alt="leaflet04" src="../images/exr4/leaflet_04.png" />
<em>Screenshot taken on Jupyter Notebook</em></p>
<ul>
<li>ipyLeaflet allows users to create some interactions on their notebooks. Incidentally, it should be noted that these interactions may be less than using the leaflet library in pure JavaScript. Here is one of the posssible interaction of ipyleaflet package, which is clearly described in the <a href="https://ipyleaflet.readthedocs.io/en/latest/controls/split_map_control.html">documentation page</a>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">basemaps</span><span class="p">,</span> <span class="n">WMSLayer</span><span class="p">,</span> <span class="n">SplitMapControl</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="n">basemaps</span><span class="o">.</span><span class="n">CartoDB</span><span class="o">.</span><span class="n">Positron</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">wms1</span> <span class="o">=</span> <span class="n">WMSLayer</span><span class="p">(</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://geodienste.hamburg.de/HH_WMS_INSPIRE_Gebaeude_2D_ALKIS&#39;</span><span class="p">,</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="n">layers</span><span class="o">=</span><span class="s1">&#39;BU.Building&#39;</span><span class="p">,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="p">)</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">wms2</span> <span class="o">=</span> <span class="n">WMSLayer</span><span class="p">(</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://geodienste.hamburg.de/HH_WMS_INSPIRE_Flurstuecke&#39;</span><span class="p">,</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>    <span class="n">layers</span><span class="o">=</span><span class="s1">&#39;CadastralParcels&#39;</span><span class="p">,</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>    <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="p">)</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="n">right_layer</span> <span class="o">=</span> <span class="n">wms1</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="n">left_layer</span> <span class="o">=</span> <span class="n">wms2</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="n">control</span> <span class="o">=</span> <span class="n">SplitMapControl</span><span class="p">(</span><span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span><span class="p">)</span>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="n">m</span>
</code></pre></div>
<p><img alt="leaflet05" src="../images/exr4/leaflet_05.png" />
<em>Screenshot taken on Jupyter Notebook</em></p>
<ul>
<li>You might be wondering what happens to the console (or terminal window) after running the leaflet widget. The console is still there. All you need to show it again is to enable the console by going to View &gt; Show Log Console in the python notebook window.</li>
</ul>
<p><img alt="Show Log Console" src="../images/exr4/python_show_log_console.png" /></p>
<ul>
<li>In the next exercise you will experience how to drag a marker on the map and then send/print its coordinates to the console.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Map</span><span class="p">,</span> <span class="n">basemaps</span><span class="p">,</span> <span class="n">WMSLayer</span><span class="p">,</span> <span class="n">Marker</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">def</span> <span class="nf">on_location_changed</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="c1"># Do some computation given the new marker location, accessible from `event[&#39;new&#39;]`</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    <span class="c1">#print(event)</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    <span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;new&#39;</span><span class="p">],</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">marker</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    <span class="k">pass</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">center</span> <span class="o">=</span> <span class="p">(</span><span class="mf">53.547668</span><span class="p">,</span> <span class="mf">9.985685</span><span class="p">)</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="n">marker</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">on_location_changed</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">)</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="c1"># help(marker.observe)</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">basemap</span><span class="o">=</span><span class="n">basemaps</span><span class="o">.</span><span class="n">CartoDB</span><span class="o">.</span><span class="n">Positron</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="nb">map</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="n">wms</span> <span class="o">=</span> <span class="n">WMSLayer</span><span class="p">(</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://geodienste.hamburg.de/HH_WMS_DGM1&#39;</span><span class="p">,</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>    <span class="n">layers</span><span class="o">=</span><span class="s1">&#39;WMS_DGM1_HAMBURG&#39;</span><span class="p">,</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>    <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="p">)</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="nb">map</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wms</span><span class="p">)</span>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="n">display</span><span class="p">(</span><span class="nb">map</span><span class="p">)</span>
</code></pre></div>
<p><img alt="leaflet06" src="../images/exr4/leaflet_06.png" />
<em>Screenshot taken on Jupyter Notebook</em></p>
<ul>
<li>If you are interested in visualizing a 2D/3D map in a python notebook, ipyleaflet can be considered a good starting point in terms of learning curve. However, there are many different alternative python libraries that support 2D/3D geographic data visualization in python notebooks or in a python framework (Flask, Django etc). Take a glance over these libraries, if you want:</li>
<li><a href="https://python-visualization.github.io/folium/latest/">Folium</a></li>
<li><a href="https://leafmap.org/">LeafMap</a></li>
<li><a href="https://mapbox-mapboxgl-jupyter.readthedocs-hosted.com/en/latest/">MapboxGL</a></li>
<li><a href="https://plotly.com/python/">Plotly</a></li>
<li><a href="https://deckgl.readthedocs.io/en/latest/index.html">pyDeck</a></li>
<li>
<p><a href="https://cesiumpy.readthedocs.io/en/stable/">CesiumPy</a></p>
</li>
<li>
<p>If you are looking for more geospatial python libraries or resources, check out the following repository listing some well-known libraries and resources:</p>
</li>
<li><a href="https://tum-gis.github.io/geoPythonInfoTree/">GeoPythonInfoTree</a></li>
</ul>
<h2 id="2-accessing-wms-services-from-javascript-libraries">2) Accessing WMS services from JavaScript libraries</h2>
<p>There are many JavaScript libraries that support 2D or 3D map visualizations in web browsers, and sometimes these libraries are used internally as the base environment in desktop applications without resorting to any web browser. For example, threeJS is a JavaScript library that supports visualizing geospatial data on it, meanwhile it is used as a 3D Viewer in QGIS. </p>
<h3 id="21-adding-wms-services-to-openlayers">2.1) Adding WMS services to OpenLayers</h3>
<p>OpenLayers is one of the oldest and most advanced 2D map viewer libraries in JavaScript. When working in Python, you can search for a "wrapper" for these JavaScript libraries and import them into your code (For Exp. ipyleaflet was a python wrapper of leaflet JavaScript library). You also have another option to store these HTML+JavaScript packages in your directory and render them using the IPython package with the IFrame function (same with the iframe tag in HTML). This method will give you the chance to render HTML in a frame and access it from the Jupyter notebook as well. However, you can also run these standalone HTML files from your directory just by clicking on them.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/openlayers_empty_viewer.html&#39;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;300px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/openlayers_empty_viewer.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<ul>
<li>Alternatively, you can play with the file in a playground-like web applicaiton like fiddle:</li>
<li><a href="https://jsfiddle.net/muratkendir/tokr36hf/2/">Copy &amp; Edit the HTML + JavaScript bundle in JSFiddle</a></li>
<li>Notice that the OpenLayers JavaScript library is called from an external source here (Check "URL Resources" on left panel). </li>
</ul>
<p>So, examine the JavaScript code here to understand fundamentals of OpenLayers:
- "ol" is an abbreviation of OpenLayers here.
  - "map" class called from this library and three subobjects specified.
  - 1: target 2: layers 3: view
    - "target" is the ID of the HTMLElement. Check <div> elements in HTML document.
    - "layers" is the predefined layer objects in map view.
    - "view" is the definition of the view pane.</p>
<blockquote>
<p>TIP: If no coordinate reference system (CRS) is defined, pseudo-mercator (Web Mercator / EPSG:3857) is usually used as the default CRS.
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nb">Map</span><span class="p">({</span><span class="w">  </span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">        </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;map&#39;</span><span class="p">,</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">        </span><span class="nx">layers</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">          </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">            </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">OSM</span><span class="p">()</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">          </span><span class="p">})</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">        </span><span class="nx">view</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">          </span><span class="nx">center</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1287392</span><span class="p">,</span><span class="mf">6123424</span><span class="p">],</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">          </span><span class="nx">zoom</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">        </span><span class="p">})</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">      </span><span class="p">});</span>
</code></pre></div>
- Check following web documentation pages to investiage called classes in the code above.
  - <a href="https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html">ol.Map Class</a>
  - <a href="https://openlayers.org/en/latest/apidoc/module-ol_layer_Tile-TileLayer.html">ol.layer.Tile Class</a>
  - <a href="https://openlayers.org/en/latest/apidoc/module-ol_View-View.html">ol.View Class</a></p>
</blockquote>
<ul>
<li>Now, you can add a wms layer by adding following object to the layers. </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">      </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">TileWMS</span><span class="p">({</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">        </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;https://sgx.geodatenzentrum.de/wms_basemapde&#39;</span><span class="p">,</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">        </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">            </span><span class="s1">&#39;LAYERS&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;de_basemapde_web_raster_farbe&#39;</span><span class="p">,</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">            </span><span class="s1">&#39;FORMAT&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">      </span><span class="p">})</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="p">}),</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/openlayers_with_wms.html&#39;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;300px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/openlayers_with_wms.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<ul>
<li>Alternatively, you can play with the file in a playground-like web applicaiton like fiddle:</li>
<li><a href="https://jsfiddle.net/muratkendir/7k1pxhsm/">Copy &amp; Edit the HTML + JavaScript bundle in JSFiddle</a></li>
<li>
<p>Note that the basemap is still OSM, but all of Germany is covered by a WMS layer provided by basemap.de (zoom out until you see the European continent)</p>
</li>
<li>
<p>You can also check the different web service types, the API documentation of the supported classes and experience how OpenLayers supports these web services in the map view:</p>
</li>
<li>"Single Image WMS" - <a href="https://openlayers.org/en/latest/examples/wms-image.html">sample link</a> | <a href="https://openlayers.org/en/latest/apidoc/module-ol_source_ImageWMS-ImageWMS.html">API Docs - ImageWMS</a></li>
<li>"Tiled WMS layer" - <a href="https://openlayers.org/en/latest/examples/wms-tiled.html">sample link</a> | <a href="https://openlayers.org/en/latest/apidoc/module-ol_source_TileWMS-TileWMS.html">API Docs - TileWMS</a></li>
<li>"WMTS layer" - <a href="https://openlayers.org/en/latest/examples/wmts.html">sample link</a> | <a href="https://openlayers.org/en/latest/apidoc/module-ol_source_WMTS-WMTS.html">API Docs - WMTS</a></li>
<li>"WMS (1.3) with GetFeatureInfo function" - <a href="https://openlayers.org/en/latest/examples/getfeatureinfo-image.html">sample link</a> | (Check ImageWMS API Docs)</li>
<li>"WFS vector layer" - <a href="https://openlayers.org/en/latest/examples/vector-wfs.html">sample link</a> | <a href="https://openlayers.org/en/latest/apidoc/module-ol_renderer_canvas_VectorLayer-CanvasVectorLayerRenderer.html">API Docs - VectorLayer</a></li>
<li>"WFS vector layer with getFeature function" - <a href="https://openlayers.org/en/latest/examples/vector-wfs-getfeature.html">sample link</a> | <a href="https://openlayers.org/en/latest/apidoc/module-ol_format_WFS-WFS.html">API Docs - WFS GetFeature</a></li>
</ul>
<blockquote>
<p>TIP : You can start to play with the given codes by clicking to "Edit" button at right top corner.</p>
</blockquote>
<h3 id="22-adding-wms-services-to-cesiumjs">2.2) Adding WMS services to CesiumJS</h3>
<p>CesiumJS is a popular 3D Map view library that supports additional 3D assets (object collections) such as 3D Tiles, tiled terrain models, GLTF/GLB (3D) models, etc. However, as a common map display environment, CesiumJS continues to support widely used geospatial data formats and web services such as GeoJSON, WMS, WMTS, etc. Just like we did before for OpenLayers, you can call CesiumJS libraries from a remote repository and visualize them here as HTML views:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/cesium_empty_viewer.html&#39;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/cesium_empty_viewer.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<ul>
<li>Alternatively, you can play with the file in Sandcastle (a playground provided by CesiumJS):</li>
<li>
<p><a href="https://sandcastle.cesium.com/#c=dZLRb9owEMb/lRMvMCmzQQN1YhRNo6qG1KrT6PbEQ93kSE5zzpF9AbGp//tMQgZlW54ud9/3k++zAbSGJZOQsfQTQQqEBQaqS/hOuEMPxE3z8+P9HaDFEllgR1I03ae00S4ciyFG/wTLG7Xm1HEQ2LaAa2DcHaGqhQ76F75+Ar/WDM2n9beA8FAhr8Qjyr2pQjej0uTo91+821IW2dNz9ivL8rVy8AcPUHsbjf1CpApTrY0SsqhcdIfGXZpKOZ/rfmd5eZN05aa2NqRRxZ9qEcdT8TUCnJQf2jKmemv3TUapKdEbEAcrw3DrDacUUgdGmnFOW2SwjnOSOsMErJFjZTiDAikvRLXUNlHVEtXG7h/dabEMgxBHs+O43jGThfESK8Pv1Ma78gbzePYwGI3U5GqSjN+r0fAqgfFwODzt6DzFS+5AZ8EVaDLi/ES/N1IocV9j23AYDNUZBaAiSYv/it+OJ+fyl7ZoAuwlvVmQvcV5N/1IZeW8HK5uoJQWLKsYEwb9XKc/UFQaQpf8TJ9bZxltgbLrde/ixa17kFoTQpwc7nQVH/+6N5/pqP/Lal2z98MWvTX7g6wYze/aplJqpuPvv53inH02/oL8Gw">Sample in Cesium Sandcastle</a></p>
</li>
<li>
<p>If you examine the code in the example, you will notice that a main object (viewer) is called to the scene:</p>
</li>
<li><a href="https://cesium.com/learn/cesiumjs/ref-doc/Viewer.html">viewer</a></li>
<li>Then one of the possible imagery provider class "OpenStreetMap" called into the DOM element called "cesiumContainer"</li>
<li>
<p><a href="https://cesium.com/learn/cesiumjs/ref-doc/OpenStreetMapImageryProvider.html?classFilter=imageryprovider">OpenStreetMapImageryProvider</a></p>
</li>
<li>
<p>Camera is a need to set an oblique view to the interested area. There are multiple techniques to set a view (check the <a href="https://cesium.com/learn/cesiumjs-learn/cesiumjs-camera/">link</a>), but one of the most used method is setting heading-pitch-roll angles. If you are unfmailiar with heading-pitch-roll angles, visit following page: <a href="https://en.wikipedia.org/wiki/Aircraft_flight_dynamics">Heading(Yaw)-Pitch-Roll</a>.
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Viewer</span><span class="p">(</span><span class="s1">&#39;cesiumContainer&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">  </span><span class="nx">imageryProvider</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">OpenStreetMapImageryProvider</span><span class="p">({</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;https://a.tile.openstreetmap.org/&#39;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">  </span><span class="p">}),</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">  </span><span class="nx">fullscreenButton</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="p">});</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">flyTo</span><span class="p">({</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">  </span><span class="nx">destination</span><span class="o">:</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Cartesian3</span><span class="p">.</span><span class="nx">fromDegrees</span><span class="p">(</span><span class="mf">11.575</span><span class="p">,</span><span class="w"> </span><span class="mf">48.107</span><span class="p">,</span><span class="w"> </span><span class="mf">4000</span><span class="p">),</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">  </span><span class="nx">orientation</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="nx">heading</span><span class="o">:</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">toRadians</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">    </span><span class="nx">pitch</span><span class="o">:</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">toRadians</span><span class="p">(</span><span class="o">-</span><span class="mf">45.0</span><span class="p">),</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="p">});</span>
</code></pre></div></p>
</li>
</ul>
<blockquote>
<p>TIP : OpenStreetMapImageryProvider is only one of the available options for adding image layers to CesiumJS. You can type "ImageryProvider" in the serarch box on the API documentation page to find out all the possibilities.</p>
</blockquote>
<ul>
<li>Similarly to OpenLayers code, you can add WMS service as a basemap option to the Cesium scene by specifying the parameters.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">geourl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://sgx.geodatenzentrum.de/wms_basemapde&#39;</span><span class="p">;</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="kd">var</span><span class="w"> </span><span class="nx">imageryLayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">viewer</span><span class="p">.</span><span class="nx">imageryLayers</span><span class="p">;</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="kd">var</span><span class="w"> </span><span class="nx">geoWmsLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">WebMapServiceImageryProvider</span><span class="p">({</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">                    </span><span class="nx">url</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">geourl</span><span class="p">,</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">                    </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">                        </span><span class="nx">service</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;WMS&#39;</span><span class="p">,</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">                        </span><span class="nx">format</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">                    </span><span class="p">},</span><span class="w">   </span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">                    </span><span class="nx">layers</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;de_basemapde_web_raster_farbe&#39;</span><span class="p">,</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">                    </span><span class="nx">EPSG</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;4326&#39;</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">                    </span><span class="p">});</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">imageryLayers</span><span class="p">.</span><span class="nx">removeAll</span><span class="p">();</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="nx">imageryLayers</span><span class="p">.</span><span class="nx">addImageryProvider</span><span class="p">(</span><span class="nx">geoWmsLayer</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>If we combine this code block with the previous cesium code, we will get following scene:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/cesium_with_wms.html&#39;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/cesium_with_wms.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<ul>
<li>Also check the following samples and related API documentations to learn more about the possibilities in CeisumJS:<ul>
<li><a href="https://sandcastle.cesium.com/?src=Imagery%20Layers.html&amp;label=Beginner">Imagery Layers</a> | <a href="https://cesium.com/learn/cesiumjs/ref-doc/ImageryProvider.html">API Docs - ImageryProvider</a></li>
<li><a href="https://sandcastle.cesium.com/?src=Web%20Map%20Tile%20Service%20with%20Time.html&amp;label=Beginner">WMTS layer with Time dimension</a> | <a href="https://cesium.com/learn/cesiumjs/ref-doc/WebMapTileServiceImageryProvider.html">WebMapTileServiceImageryProvider</a></li>
<li><a href="https://sandcastle.cesium.com/?src=Web%20Map%20Service%20(WMS).html&amp;label=Beginner">WMS GetFeatureInfo</a> | (Check the ImageryProvider page)</li>
<li><a href="https://sandcastle.cesium.com/?src=Cesium%20OSM%20Buildings.html&amp;label=Beginner">OSM 3D Buildings Dataset</a> | <a href="https://cesium.com/learn/cesiumjs/ref-doc/global.html#createOsmBuildings">createOSMBuildings</a></li>
<li><a href="https://sandcastle.cesium.com/?src=3D%20Tiles%20Point%20Cloud.html&amp;label=3D%20Tiles">Point Clouds as 3D Tiles</a> | <a href="https://cesium.com/learn/cesiumjs/ref-doc/Cesium3DTileset.html">Cesium3DTileset</a></li>
<li><a href="https://sandcastle.cesium.com/?src=3D%20Tiles%20Point%20Cloud%20Classification.html&amp;label=3D%20Tiles">Segmented Point Clouds as 3D Tiles</a> | <a href="https://cesium.com/learn/cesiumjs/ref-doc/Cesium3DTileStyle.html">Cesium3DTileStyle</a></li>
</ul>
</li>
</ul>
<h3 id="23-using-ogc-feature-api-as-geojson-source-in-cesium">2.3) Using OGC Feature API as GeoJSON source in Cesium</h3>
<p>One of the natively supported formats in CesiumJS is the "GeoJSON" data format. GeoJSON is quite similar to JSON files, but is standardized to support geospatial objects with a defined coordinate reference system and geometry property. This means that any OGC Feature API service that provides GeoJSON files can be easily adapted with CesiumJS scenes. The easiest way to import the OGC Feature API is to predefine the query and format in the URL and reference the URL as if calling a GeoJSON file from a repository.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1">// Set a viewer</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Viewer</span><span class="p">(</span><span class="s2">&quot;cesiumContainer&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{});</span>
</code></pre></div>
<ul>
<li>Prepare the URL refers to OGC Feature API</li>
<li>Example taken from the following data source:<ul>
<li>https://suche.transparenz.hamburg.de/dataset/grundwassergleichen-min11</li>
</ul>
</li>
<li>Query parameters specifies following filtering options:<ul>
<li>First 10 (limit=10) of ground water sources which have 20 meters level (gw_stand_in_meter_nhn=20)</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nx">feature_api_query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://api.hamburg.de/datasets/v1/grundwassergleichen_min/collections/u12_l_gleichenplan_min/items?limit=10&amp;gw_stand_in_meter_nhn=20&#39;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">GeoJsonDataSource</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">feature_api_query</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>Now, you can add the data source  to the viewer and set the viewer extend to cover loaded geojson data source.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">dataSources</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">dataSource</span><span class="p">);</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">zoomTo</span><span class="p">(</span><span class="nx">dataSource</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/cesium_with_geojson.html&#39;</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/cesium_with_geojson.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<h2 id="3-fundamentals-of-3d-visualization-in-cesiumjs">3) Fundamentals of 3D Visualization in CesiumJS</h2>
<p>We have already added a WMS layer to the 3D map environment using the CesiumJS JavaScript library. Adding 2D overlays (GeoJSON, WMTS, WMS, XYZ basemaps etc) to the 3D map environment is not an outdated or unpopular method, but it is just one step in creating a well-designed 3D map. Generally, the steps required to create a 3D map environment can be summarized as follows: Adding 3D models, adding a 3D terrain model, overlaying the terrain with a coverage and finally adjusting the view to focus on the area of interest. In this step, we will try to follow these instructions one by one and experience 3D assets.</p>
<h3 id="31-adding-3d-buildings-to-the-cesium-viewer">3.1) Adding 3D Buildings to the Cesium viewer</h3>
<p>There are multiple ways to add 3D Tiles to a Cesium map. First of all, we need to consider that 3D Tiles are a set of binary files defined in JSON format and stored in a hierarchy.
Therefore, to add a 3D Tile to the Cesium map, all that is needed is to find a suitable 3DTiles dataset and reference the main JSON file (usually named as "tileset.json") that stands at the top in the hierarchy. </p>
<p>Another way to add 3DTiles to a Cesium map is using Cesium Ion and it's datasets which are available to use with or without an access token. OSMBuildings is one of these datasets and it is able to use without an access token.</p>
<p>If you want to discover more about the available datasets, visit the webpage <a href="https://ion.cesium.com">CesiumIon</a> and check the "Asset Depot" tab after logging in.</p>
<p>Add these codes at the end of your previously code (In section 2.2) and refresh the web page if needed.
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">buildingsTileset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">createOsmBuildingsAsync</span><span class="p">();</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">primitives</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">buildingsTileset</span><span class="p">);</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/cesium_with_wms_with_osm.html&#39;</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/cesium_with_wms_with_osm.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<p>As you may notice, the predefined 3D building dataset (based on OpenStreetMap extruded buildings, check <a href="https://osmbuildings.org">OSMBuildings</a> ) is loaded into the scene, but there is a serious problem. The buildings appear to float several hundred meters above the ground. This is because there is no terrain defined yet (a 3d model showing the current heights of the ground) and therefore Cesium works on an artificial surface based on an ellipsoidal geometry (i.e. the WGS84 ellipsoid).</p>
<h3 id="32-adding-terrain-to-the-cesium-viewer">3.2) Adding terrain to the Cesium viewer</h3>
<p>We can add a globally available terrain by adding these codes into our code. Please consider that, terrain object must be defined in CesiumContainer widget as an option.
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Viewer</span><span class="p">(</span><span class="s1">&#39;cesiumContainer&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">        </span><span class="nx">terrain</span><span class="o">:</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Terrain</span><span class="p">.</span><span class="nx">fromWorldTerrain</span><span class="p">(),</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="p">});</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/cesium_with_wms_with_osm_with_terrain.html&#39;</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/cesium_with_wms_with_osm_with_terrain.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>
<p>Just like 3D Tiles, terrain models can also be called from external sources. In this way, it is possible to provide moew accurate and precise terrain models which is a need especially when visualizing smaller buildings on bumpy areas (For example click to search button at right top side of the cesium widget and type "Neuschwanstein Castle").  </p>
<h3 id="33-adding-custom-terrain-models-3dtiles-and-wms-services-to-cesium">3.3) Adding custom terrain models, 3DTiles and WMS services to Cesium</h3>
<p>As mentioned earlier, it is possible to add custom-built 3D Tiles and terrain models to Cesium. As these datasets are usually very large and expensive, there are not many publicly available datasets yet. Most of the time, these datasets are provided by an authority with a requirement to use a token or authentication method.</p>
<p>Let's start building another example from scratch and add custom (and publicly available) terrain models, 3DTiles and a WMS or WMTS service to the Cesium scene.</p>
<p>Remove all previous code and add the following lines to the \&lt;script&gt; tag.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1">// Add following code to activate Cesium viewer with terrain model provided by</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="c1">// swisstopo team and coumented here: https://api3.geo.admin.ch/services/sdiservices.html</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">viewer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Viewer</span><span class="p">(</span><span class="s2">&quot;cesiumContainer&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">      </span><span class="nx">terrain</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Terrain</span><span class="p">(</span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">CesiumTerrainProvider</span><span class="p">.</span><span class="nx">fromUrl</span><span class="p">(</span><span class="s2">&quot;https://3d.geo.admin.ch/1.0.0/ch.swisstopo.terrain.3d/default/20200520/4326/&quot;</span><span class="p">))</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="p">});</span>
</code></pre></div>
<p>In the next step, define the interested area, in which you want to see both terrain and the buildings together. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">//Geographic coordinates of famous place Zermatt in Switzerland</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kd">var</span><span class="w"> </span><span class="nx">center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Cartesian3</span><span class="p">.</span><span class="nx">fromDegrees</span><span class="p">(</span><span class="mf">7.6594</span><span class="p">,</span><span class="w"> </span><span class="mf">45.9904</span><span class="p">);</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="kd">var</span><span class="w"> </span><span class="nx">heading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">toRadians</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="kd">var</span><span class="w"> </span><span class="nx">pitch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nb">Math</span><span class="p">.</span><span class="nx">toRadians</span><span class="p">(</span><span class="o">-</span><span class="mf">90.0</span><span class="p">);</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="kd">var</span><span class="w"> </span><span class="nx">range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5000</span><span class="p">;</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="kd">var</span><span class="w"> </span><span class="nx">hpr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">HeadingPitchRange</span><span class="p">(</span><span class="nx">heading</span><span class="p">,</span><span class="w"> </span><span class="nx">pitch</span><span class="p">,</span><span class="w"> </span><span class="nx">range</span><span class="p">);</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">camera</span><span class="p">.</span><span class="nx">lookAt</span><span class="p">(</span><span class="nx">center</span><span class="p">,</span><span class="w"> </span><span class="nx">hpr</span><span class="p">);</span>
</code></pre></div></p>
<p>Add the 3D Buildings or vegetation objects, which has provided as 3DTiles in this <a href="https://api3.geo.admin.ch/services/sdiservices.html#d-tiles">website</a>.
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1">// Add 3D Buildings or Vegetation objects by using 3DTiles links in following site:</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="c1">// https://api3.geo.admin.ch/services/sdiservices.html#d-tiles</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">buildingsTileset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">Cesium3DTileset</span><span class="p">.</span><span class="nx">fromUrl</span><span class="p">(</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">     </span><span class="s2">&quot;https://vectortiles.geo.admin.ch/3d-tiles/ch.swisstopo.swisstlm3d.3d/20201020/tileset.json&quot;</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="p">);</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">primitives</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">buildingsTileset</span><span class="p">);</span>
</code></pre></div></p>
<blockquote>
<p>TIP: You can experiment with a 3DTiles dataset that provides LOD2/3 buildings in Munich using following tileset : "https://bvv3d21.bayernwolke.de/3d-data/latest/lod23d/tileset.json"</p>
</blockquote>
<p>Finally add the WMS layer similar to the previous steps.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">geourl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://wms.geo.admin.ch/&#39;</span><span class="p">;</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">imageryLayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">viewer</span><span class="p">.</span><span class="nx">imageryLayers</span><span class="p">;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">geoWmsLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Cesium</span><span class="p">.</span><span class="nx">WebMapServiceImageryProvider</span><span class="p">({</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">            </span><span class="nx">url</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">geourl</span><span class="p">,</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">            </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">                </span><span class="nx">service</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;WMS&#39;</span><span class="p">,</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">            </span><span class="nx">format</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">            </span><span class="p">},</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">        </span><span class="nx">layers</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ch.swisstopo.swisstlm3d-karte-farbe&#39;</span><span class="p">,</span>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">            </span><span class="nx">EPSG</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;4326&#39;</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">            </span><span class="p">});</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">    </span><span class="nx">viewer</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">imageryLayers</span><span class="p">.</span><span class="nx">removeAll</span><span class="p">();</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">    </span><span class="nx">imageryLayers</span><span class="p">.</span><span class="nx">addImageryProvider</span><span class="p">(</span><span class="nx">geoWmsLayer</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kn">import</span> <span class="nn">IPython</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;raw_codes/exr4/cesium_with_everything_custom.html&#39;</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="n">IPython</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">)</span>
</code></pre></div>
<p><iframe
    width="100%"
    height="300px"
    src="../raw_codes/exr4/cesium_with_everything_custom.html"
    style="border:10px solid #005293;margin:0;padding:0;" 
    allowfullscreen
></iframe>
</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>