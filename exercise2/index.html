
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../install_w_pip_on_win/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Exercise 2 (Python Intro) - dist-gis-exercises (Educational Python Notebooks)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction-to-python-with-an-example-app-based-on-geospatial-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dist-gis-exercises (Educational Python Notebooks)" class="md-header__button md-logo" aria-label="dist-gis-exercises (Educational Python Notebooks)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dist-gis-exercises (Educational Python Notebooks)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercise 2 (Python Intro)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dist-gis-exercises (Educational Python Notebooks)" class="md-nav__button md-logo" aria-label="dist-gis-exercises (Educational Python Notebooks)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    dist-gis-exercises (Educational Python Notebooks)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Exercise 2 (Python Intro)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Exercise 2 (Python Intro)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-visit-bayernatlas-website" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1) Visit BayernAtlas website
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-make-a-request-with-python-and-requests-library" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2) Make a request with Python and "Requests" library
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2) Make a request with Python and "Requests" library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2a-what-is-happened" class="md-nav__link">
    <span class="md-ellipsis">
      2a) What is happened?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2b-how-to-work-with-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      2b) How to work with libraries?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2c-how-to-expose-the-existing-methods-in-a-library" class="md-nav__link">
    <span class="md-ellipsis">
      2c) How to expose the existing methods in a library?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2d-what-we-got-by-the-request" class="md-nav__link">
    <span class="md-ellipsis">
      2d) What we got by the request?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-how-to-view-the-content-of-the-response" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3) How to view the content of the response?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3) How to view the content of the response?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3b-optional-open-images-with-pillow" class="md-nav__link">
    <span class="md-ellipsis">
      3b (optional) Open Images with Pillow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3c-optional-open-images-with-web-browser" class="md-nav__link">
    <span class="md-ellipsis">
      3c (optional) Open Images with Web Browser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-what-about-json-xml-html-based-files" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4) What about JSON / XML / HTML based files?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-how-to-request-json-xml-html-based-files-from-the-web-services" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5) How to request JSON / XML / HTML based files from the web services?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 5) How to request JSON / XML / HTML based files from the web services?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5a-inspect-the-response" class="md-nav__link">
    <span class="md-ellipsis">
      5a) Inspect the response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5b-convert-dictionary-to-text-using-json-library-dumps-method" class="md-nav__link">
    <span class="md-ellipsis">
      5b) Convert Dictionary to Text using JSON library (dumps method)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5c-convert-text-to-dictionary-using-json-library-loads-method" class="md-nav__link">
    <span class="md-ellipsis">
      5c) Convert Text to Dictionary using JSON library (loads method)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5d-save-the-json-file" class="md-nav__link">
    <span class="md-ellipsis">
      5d) Save the JSON file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5e-use-one-of-the-parameters-of-dumps-method-eg-indentation" class="md-nav__link">
    <span class="md-ellipsis">
      5e) Use one of the parameters of dumps method (e.g. Indentation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5f-get-a-subset-of-the-dictionary-using-json-library-__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      5f) Get a subset of the dictionary using JSON library (__getitem__ / [ ] )
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5g-saving-the-response-as-it-is-in-binary-format" class="md-nav__link">
    <span class="md-ellipsis">
      5g) Saving the response as it is in binary format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-read-a-json-file-and-display-in-python-interpreter" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6) Read a JSON file and display in python interpreter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-convert-the-json-request-into-a-program-that-saves-only-properties-to-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7) Convert the JSON request into a program that saves only properties to a file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-convert-your-code-block-into-a-function-and-let-users-define-their-own-url-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Step 8) Convert your code block into a function and let users define their own URL requests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 8) Convert your code block into a function and let users define their own URL requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8a-seperate-the-listing-mechanism-as-a-function" class="md-nav__link">
    <span class="md-ellipsis">
      8a) Seperate the listing mechanism as a function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8b-let-the-users-interact-with-your-program-input-function" class="md-nav__link">
    <span class="md-ellipsis">
      8b) Let the users interact with your program (input function)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation Instructions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Installation Instructions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install_w_pip_on_win/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows w PIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install_w_pip_on_lnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux w PIP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-visit-bayernatlas-website" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1) Visit BayernAtlas website
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-make-a-request-with-python-and-requests-library" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2) Make a request with Python and "Requests" library
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2) Make a request with Python and "Requests" library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2a-what-is-happened" class="md-nav__link">
    <span class="md-ellipsis">
      2a) What is happened?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2b-how-to-work-with-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      2b) How to work with libraries?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2c-how-to-expose-the-existing-methods-in-a-library" class="md-nav__link">
    <span class="md-ellipsis">
      2c) How to expose the existing methods in a library?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2d-what-we-got-by-the-request" class="md-nav__link">
    <span class="md-ellipsis">
      2d) What we got by the request?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-how-to-view-the-content-of-the-response" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3) How to view the content of the response?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 3) How to view the content of the response?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3b-optional-open-images-with-pillow" class="md-nav__link">
    <span class="md-ellipsis">
      3b (optional) Open Images with Pillow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3c-optional-open-images-with-web-browser" class="md-nav__link">
    <span class="md-ellipsis">
      3c (optional) Open Images with Web Browser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-what-about-json-xml-html-based-files" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4) What about JSON / XML / HTML based files?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-how-to-request-json-xml-html-based-files-from-the-web-services" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5) How to request JSON / XML / HTML based files from the web services?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 5) How to request JSON / XML / HTML based files from the web services?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5a-inspect-the-response" class="md-nav__link">
    <span class="md-ellipsis">
      5a) Inspect the response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5b-convert-dictionary-to-text-using-json-library-dumps-method" class="md-nav__link">
    <span class="md-ellipsis">
      5b) Convert Dictionary to Text using JSON library (dumps method)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5c-convert-text-to-dictionary-using-json-library-loads-method" class="md-nav__link">
    <span class="md-ellipsis">
      5c) Convert Text to Dictionary using JSON library (loads method)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5d-save-the-json-file" class="md-nav__link">
    <span class="md-ellipsis">
      5d) Save the JSON file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5e-use-one-of-the-parameters-of-dumps-method-eg-indentation" class="md-nav__link">
    <span class="md-ellipsis">
      5e) Use one of the parameters of dumps method (e.g. Indentation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5f-get-a-subset-of-the-dictionary-using-json-library-__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      5f) Get a subset of the dictionary using JSON library (__getitem__ / [ ] )
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5g-saving-the-response-as-it-is-in-binary-format" class="md-nav__link">
    <span class="md-ellipsis">
      5g) Saving the response as it is in binary format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-read-a-json-file-and-display-in-python-interpreter" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6) Read a JSON file and display in python interpreter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-convert-the-json-request-into-a-program-that-saves-only-properties-to-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7) Convert the JSON request into a program that saves only properties to a file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-convert-your-code-block-into-a-function-and-let-users-define-their-own-url-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Step 8) Convert your code block into a function and let users define their own URL requests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 8) Convert your code block into a function and let users define their own URL requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8a-seperate-the-listing-mechanism-as-a-function" class="md-nav__link">
    <span class="md-ellipsis">
      8a) Seperate the listing mechanism as a function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8b-let-the-users-interact-with-your-program-input-function" class="md-nav__link">
    <span class="md-ellipsis">
      8b) Let the users interact with your program (input function)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="introduction-to-python-with-an-example-app-based-on-geospatial-data">Introduction to Python with an Example App Based on Geospatial Data</h1>
<p><img align="right" width=100 height=190 src="images/TUM_Logo_blau_rgb_p.png"/></p>
<blockquote>
Murat Kendir, Prof. Thomas Kolbe || Chair of Geoinformatics, TUM || murat.kendir@tum.de
</blockquote>

<ul>
<li>In the previous exercise we explored the BayernAtlas website and experienced the data services and interactions behind the web interface by using Web Developer Tool.</li>
<li>In this exercise, you will learn how to access similar data sources (web services) and manage the data using some simple Python codes.</li>
<li>However, before starting this exercise you need to know more about the datasets and how to access it.</li>
</ul>
<h2 id="step-1-visit-bayernatlas-website">Step 1) Visit <a href="https://geoportal.bayern.de/bayernatlas">BayernAtlas</a> website</h2>
<ul>
<li>[ ] Open the "web developer tool" by pressing Ctrl+Shift+C (or Ctrl+Shift+I) or by finding the tool in the browser menu.</li>
<li>[ ] Select a background map at any specific location on the map.</li>
<li>[ ] Check the URL of a raster image taken as a base map from the BayernAtlas website.</li>
<li>[ ] Copy the URL and try requesting this image by pasting the URL into the address bar.</li>
<li>[ ] or you can test the URL using the "curl" program at the command prompt (CMD / Eingabeaufforderung).
<img alt="BayernAtlas Basemap Request Sample" src="../images/exr2/bayernatlas_wmts_image.png" /></li>
</ul>
<h2 id="step-2-make-a-request-with-python-and-requests-library">Step 2) Make a request with Python and "Requests" library</h2>
<ul>
<li>[ ] Start a text editor (Notepad, Notepad++, SublimeText) or an IDE (Idle, Spyder, PyCharm)</li>
<li>[ ] Write the following code in the editor and save it as a file with .PY extension.</li>
<li>Tip: Enable file extensions in Windows Explorer to view all file extensions.<ul>
<li><a href="https://fileinfo.com/help/windows_10_show_file_extensions">how to enable file extensions (in english)</a></li>
<li><a href="https://www.giga.de/tipp/windows-10-und-11-dateiendungen-anzeigen-so-gehts/#windows_10_dateiendungen_einblenden">how to enable file extensions (in german)</a></li>
</ul>
</li>
<li>[ ] Open command prompt (Eingabeaufforderung) and navigate to the same folder as your python file. Execute the file by typing <code>python MY_PYTHON_CODE.py</code> (or type in <code>python3 MY_PYTHON_CODE.py</code> in Linux systems)</li>
<li>[ ] Try running python within <strong>interactive</strong> mode by typing <code>python --interactive MY_PYTHON_CODE.py</code>.</li>
</ul>
<pre><code class="language-python"># Import the native &quot;requests&quot; library to send a request to the web source.
import requests

# Replace the URL in the follwoing code with your selected URL
mydata = requests.get(&quot;https://intergeo33.bayernwolke.de/betty/c_hist/13/4197/4598&quot;)

#Check what the &quot;mydata&quot; object.
print(mydata)
</code></pre>
<pre><code>&lt;Response [200]&gt;
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
</tr>
<tr>
<td><strong>Data Type</strong></td>
<td>requests.models.Response</td>
</tr>
</tbody>
</table>
<h3 id="2a-what-is-happened">2a) What is happened?</h3>
<ul>
<li><code>import requests</code> imported the library named "requests". This library is a simple HTTP library supports all the methods available in the HTTP protocol such as GET, POST, DELETE etc.</li>
<li><code>mydata =</code> defines a variable and assigns it to the following object.</li>
<li><code>requests.get()</code> calls a method in the requests library.</li>
</ul>
<blockquote>
<p>When a class (e.g. requests) contains functions (e.g. get) defined for the class itself, these functions are called "methods". </p>
</blockquote>
<ul>
<li><code>print(mydata)</code> represents the content of the returned object.</li>
</ul>
<h3 id="2b-how-to-work-with-libraries">2b) How to work with libraries?</h3>
<ul>
<li>[ ] Find and explore the documentation pages available on the Internet. <a href="https://requests.readthedocs.io/en/latest/user/quickstart/">requests doc</a></li>
<li>Tip: You can use package repositories to find links to documentation pages. <a href="https://pypi.org/project/requests/">Python Package Installer site</a></li>
<li>[ ] Use the help() function to read the summarized documentation about the requests library. Type (<code>help(requests)</code>) and run the code.</li>
</ul>
<h3 id="2c-how-to-expose-the-existing-methods-in-a-library">2c) How to expose the existing methods in a library?</h3>
<ul>
<li>[ ] In Python, everything is considered an object and each object can be examined by predefined functions such as type, dir, help etc. These predefined functions are called  "Built-ins" and can be listed by typing <code>dir(__builtins__)</code></li>
<li>[ ] Since the requests class is also considered an object you can follow the same procedure to expose existing methods for this class. Type <code>dir(requests)</code></li>
<li>[ ] Note that standard HTTP methods (get, post, put, delete etc.) area available in the list.</li>
</ul>
<h3 id="2d-what-we-got-by-the-request">2d) What we got by the request?</h3>
<ul>
<li>[ ] If you need to learn more about the data you received with the request, use the following functions:</li>
<li>[ ] <code>help(mydata)</code></li>
<li>[ ] <code>type(mydata)</code></li>
<li>[ ] <code>dir(mydata)</code></li>
<li>Note that if you are using an IDE to code you may have some useful tools to represent the information of variables. Check Spyder or PyCharm or Visual Studio Code IDE's.</li>
<li>[ ] You can also examine the hierarchical structure of the "requests" class imported with the library.</li>
<li>[ ] Try to find requests.models.Response with "dir" function:<ul>
<li>[ ] dir(requests)</li>
<li>[ ] dir(requests.models)</li>
<li>[ ] dir(requests.models.Response)</li>
<li>Note that the class names must be spelled exactly the same, because the python interpreter (the interactive compiler running at the backgorund) is <strong>case-sensitive</strong>. (e.g. <code>dir(requests.models.response)</code> would not work.)</li>
</ul>
</li>
<li>[ ] If you followed the commands you might notice that the variable "mydata" is an instance object of the class "requests.models.Response". You can check it with the function <code>isinstance(my_object, (class_name))</code>.</li>
</ul>
<pre><code class="language-python">print( isinstance(mydata, (requests.models.Response)))
</code></pre>
<pre><code>True
</code></pre>
<h2 id="step-3-how-to-view-the-content-of-the-response">Step 3) How to view the content of the response?</h2>
<ul>
<li>[ ] If you type <code>dir(mydata)</code> again, you can see all available methods to reveal the content of the object. <ul>
<li>[ ] Try to reveal the content by typing <code>print( mydata.content )</code></li>
<li>[ ] or by typing <code>print( mydata.text )</code></li>
<li>Note that because the file is an image file in binary format, the content is displayed as strings that are not human readable.</li>
</ul>
</li>
<li>TIP: You can follow different tactics to view an image file in python. A standard library (native library) called "webbrowser" can call a minimal browser and display the image inside the browser. Another method would be import the "Image" class from the "PIL" library. To import this class, you can add <code>from PIL import Image</code> at the beginning of your code block. Since "PIL" is not a native python library, you may need to install it on your environment using (<code>pip install Pillow</code>)</li>
<li>[ ] For now we will just save the image file in the same folder using the following code:</li>
</ul>
<pre><code class="language-python">with open(&quot;responses/exr2/my_requested_image.jpg&quot;, &quot;wb&quot;) as my_image_file:
        my_image_file.write(mydata.content)
</code></pre>
<pre><code>File might be saved, check the folder: responses/exr2
</code></pre>
<ul>
<li>[ ] "open" is another built-in function in pyhton. It needs the filename as the first parameter and the file mode as the second parameter. If you want to learn more about the "file mode", visit this page: <a href="https://realpython.com/read-write-files-python/">Real Python</a> or type <code>help(open)</code> in the python interpreter.</li>
<li>[ ] We need to set the default export directory as relative path. To make these relative paths compatible with different operating systems (OS), the directory separator must be detected and replaced regarding to the current OS. A native python library "os" has such classes (<strong>os.path.sep</strong> and <strong>os.path.join</strong>) that makes it easy to implement.</li>
</ul>
<p>TIP: The reason for using "open" function via "with" is that the file should be closed after the manipulation. In the past, developers were often used the "close" function after every file manipulation. There is no need to use this file condition test when using "with" phrase.</p>
<pre><code class="language-python">import requests

# Detect the current OS and change the relative paths regarding to it.
import os

export_folder = os.path.join('responses','exr2') + os.path.sep
#print(export_folder)

# Replace the URL in the follwing code with your selected URL
mydata = requests.get(&quot;https://intergeo33.bayernwolke.de/betty/c_hist/13/4197/4598&quot;)

with open(export_folder + &quot;my_requested_image.jpg&quot;, &quot;wb&quot;) as my_image_file:
    my_image_file.write(mydata.content)
    print(&quot;File might be saved, check the folder: responses/exr2&quot;)
</code></pre>
<pre><code>File might be saved, check the folder: responses/exr2
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.content</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>bytes (binary)</td>
</tr>
</tbody>
</table>
<p>TIP: You may notice that the last line (<code>my_image_file.write(mydata.content)</code>) does not contain any parentheses or curly braces to highlight the inner code block. This is because parentheses and curly brackets are not used in the python programming language to do that. You need to use indentation to create a hierarchical programming style (e.g. conditional statements, functions, loops, etc.). Indentation usually consists of 4 space characters, but it can also be customized (e.g. You can use 3 spaces or TAB chacracter). Also note that a column (:) character is needed at the end of the last line before the indented lines.</p>
<p>An example comparison between C and Python programming languages shows how indentation interpreted in python:
<img alt="PythonvsC" src="../images/exr2/py_vs_c_identation.png" /></p>
<h3 id="3b-optional-open-images-with-pillow">3b (optional) Open Images with Pillow</h3>
<ul>
<li>[ ] You can show up the saved image using "PIL" (Pillow) library by running following code.</li>
<li>TIP : If you are calling the "PIL" library for the first time in your local environment, you may need to install it with <code>pip install pillow</code> command.</li>
</ul>
<pre><code class="language-python">from PIL import Image
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

requested_image = Image.open(export_folder + &quot;my_requested_image.jpg&quot;)

display(requested_image)
</code></pre>
<p><img alt="png" src="../output_23_0.png" /></p>
<h3 id="3c-optional-open-images-with-web-browser">3c (optional) Open Images with Web Browser</h3>
<ul>
<li>[ ] If you are running this notebook in your local environment, you can open the image on your default web browser by using the native python library "webbrowser". Try to execute following code.</li>
</ul>
<pre><code class="language-python">import webbrowser
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

webbrowser.open_new_tab(export_folder + &quot;my_requested_image.jpg&quot;)
</code></pre>
<pre><code>True
</code></pre>
<h2 id="step-4-what-about-json-xml-html-based-files">Step 4) What about JSON / XML / HTML based files?</h2>
<ul>
<li>[ ] Let's find another web service that offers JSON or GML based data files and follow similar instructions to save this data on our local machine or python environment. Visit following web page:<ul>
<li><a href="https://www.ldproxy.nrw.de/kataster">Basic geospatial data of the official surveying system in North Rhine-Westphalia</a> (Geobasisdaten des amtlichen Vermessungswesens in Nordrhein-Westfalen
)</li>
</ul>
</li>
<li>[ ] Select one of the "collection"s (Landparcel/Flurstück, Building/Gebaeude or Administrative Unit/Verwaltungseinheit). </li>
<li>[ ] Select one of the features in the list and click on the JSON link at top right side of the page. If the data looks like too complex, try finding and installing a JSON viewer/parser add-on/extension for your browser.<ul>
<li>TIP: It is recommended to search for "JSON Lite" in Firefox, "JSON-Handle" or "JSON Viewer Pro" in Chrome browser.</li>
</ul>
</li>
<li>[ ] Check also the GML file on the same page (Top-right). You can also find some useful add-ons/extensions to visualize XML based files in a "more human-readable way", often called  "pretty-print" style.<ul>
<li>TIP: It is recommended to search for "Pretty XML" in Firefox, "XML Plus" in Chrome browser.</li>
<li>TIP: If the browser cannot open the GML/XML file in a new tab, then you can save the file on your local machine and open it by using web browser ( Right Click --&gt; Open with ).</li>
</ul>
</li>
</ul>
<p>Here you will see different visualizations of JSON or XML files within these extensions:</p>
<p><img alt="JSON or XML Visualizations" src="../images/exr2/browser_addons.png" /></p>
<h2 id="step-5-how-to-request-json-xml-html-based-files-from-the-web-services">Step 5) How to request JSON / XML / HTML based files from the web services?</h2>
<ul>
<li>[ ] Remove the last two lines from your code block or convert them into comment by adding hashtag (#) to the beginning of lines. (Keyboard Shortcut: Ctrl + / )</li>
<li>[ ] Copy and paste the requested URL in previous step (4) into your code block.</li>
<li>[ ] Add the lines <code>myjson = mydata.json()</code> and <code>print(myjson)</code> just after the requested URL.</li>
</ul>
<pre><code class="language-python">import requests

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

#print(myjson)
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.json()</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict(Python Dictionary)</td>
</tr>
</tbody>
</table>
<h3 id="5a-inspect-the-response">5a) Inspect the response</h3>
<p>Here you have As you may notice, it was not actually converted into a JSON object, but is now a "<strong>JSON serializable Python object</strong>". In general terms it has been converted into a "<strong>python dictionary</strong>" object. JSON stands for Java Script Object Notation and is designed to provide a more developer-friendly alternative to XML. If you would select a most python-native encoding format, that would be none of these, but YAML. However, YAML format is out of our focus for this exercise. That is, it is a natural data exchange format designed for JavaScript, but not for Python. Python uses predefined data types such as tuples, lists and the most JSON-like format "dictionary" to handle the same data internally. The given code part has converted the response object to a JSON by using a method of requests.get, but ...</p>
<ul>
<li>[ ] Is it really JSON?<ul>
<li>Type <code>type(myjson)</code></li>
</ul>
</li>
<li>[ ] What are available methods or attributes for this instance object?<ul>
<li>Type <code>dir(myjson)</code></li>
</ul>
</li>
<li>[ ] How can we use these available methods with this instance?<ul>
<li>Type <code>help(myjson)</code></li>
<li>or get the help document for a specific method (e.g. <code>help(myjson.items)</code>)</li>
</ul>
</li>
</ul>
<p>TIP: If you would select a most python-native encoding format, that would be none of these, but <strong>YAML</strong>. Since, the YAML format is out of our focus for this exercise, we didn't mention about that yet.</p>
<ul>
<li>[ ] If you try to save the python dictionary object to a file, you will notice an error.
<code>with open("responses/exr2/my_request.json", "w") as my_json_request:</code></li>
</ul>
<p><code>my_json_request.write(myjson)</code></p>
<ul>
<li>[ ] However, you can change the "json()" method with "text" method and save the file as received like in the example below.<ul>
<li>[ ] Alternatively, you can cast (convert the data type) the dictionary type to a string using the built-in function <strong>str()</strong>.</li>
</ul>
</li>
</ul>
<pre><code class="language-python">import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

# Alternative method:
# text_file = str(mydata)
text_file = mydata.text


with open(export_folder + &quot;my_request.json&quot;, &quot;w&quot;) as my_req:
         my_req.write(text_file)

#print(text_file)
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.text</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>str (String)</td>
</tr>
</tbody>
</table>
<h3 id="5b-convert-dictionary-to-text-using-json-library-dumps-method">5b) Convert Dictionary to Text using JSON library (dumps method)</h3>
<p>When this method is applied, ‘text_file’ is assumed to be just a dumped json file and is saved with the file extension ‘.json’. So it is currently no different from a normal text file. By importing the ‘json’ library, we will get more functionality within our data, such as filtering, sorting, re-indenting, etc.</p>
<ul>
<li>
<p>[ ] To do this, you need to import the native library called "json". Add the line at the beginning of code block: <code>import json</code></p>
</li>
<li>
<p>[ ] Then use <code>json.dumps</code> to convert the dictionary to a string. </p>
</li>
</ul>
<pre><code class="language-python">import json
import requests

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

json_file = json.dumps(myjson)

type(json_file)
</code></pre>
<pre><code>str
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.json()</td>
<td>json_file</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict</td>
<td>str</td>
</tr>
</tbody>
</table>
<h3 id="5c-convert-text-to-dictionary-using-json-library-loads-method">5c) Convert Text to Dictionary using JSON library (loads method)</h3>
<p>What if you had a text file instead of a python dictionary? Can you convert a text file to a JSON file?
- [ ] If the response text is in regular JSON format, you can convert it to a dictionary using the <strong>loads</strong> method of the json library (see below).
- If not, the json parser will throw an error and you may need to use additional string functions such as rstrip, lstrip, replace to fix the problem in the text. You can also browse <a href="https://www.w3schools.com/python/python_ref_string.asp">this web page</a> for python string methods.</p>
<pre><code class="language-python">import json
import requests

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.text

my_object = json.loads(myjson)

type(my_object)

#print(my_object.get('links'))
</code></pre>
<pre><code>dict
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>myjson</td>
<td>my_object</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>str</td>
<td>dict</td>
</tr>
</tbody>
</table>
<h3 id="5d-save-the-json-file">5d) Save the JSON file</h3>
<ul>
<li>[ ] Now, you can copy the JSON file to our local machine by using "with" statement.</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

json_file = json.dumps(myjson)

with open(export_folder + &quot;my_request.json&quot;, &quot;w&quot;) as my_json_req:
        my_json_req.write(json_file)

#print(json_file)
</code></pre>
<h3 id="5e-use-one-of-the-parameters-of-dumps-method-eg-indentation">5e) Use one of the parameters of dumps method (e.g. Indentation)</h3>
<ul>
<li>[ ] Try using some of the available parameters of "json.dumps" method. (for exp. "indent")<ul>
<li>To see all available parameters for the dumps method, type <code>help(json.dumps)</code>.</li>
</ul>
</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

json_file = json.dumps(myjson, indent=4)

with open(export_folder + &quot;my_request.json&quot;, &quot;w&quot;) as my_json_req:
        my_json_req.write(json_file)

#print(json_file)
</code></pre>
<h3 id="5f-get-a-subset-of-the-dictionary-using-json-library-__getitem__">5f) Get a subset of the dictionary using JSON library (__getitem__ / [ ] )</h3>
<ul>
<li>[ ] Python dictionaries can be filtered by defining keys. ('geometry' in the sample below)<ul>
<li>Note that <code>myjson['geometry']</code> and <code>myjson.__getitem__('geometry')</code> will produce the same results.</li>
<li>The reason is square brakets [] are the shortcuts to the __getitem__ method and such shortcut mechanisms are called "magic methods" in Python. See <a href="https://devopedia.org/magic-methods-in-python">this web page</a> see more examples for the magic methods.</li>
<li>You can type <code>help(myjson.__getitem__)</code> to expose the usage of the magic method.</li>
</ul>
</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

# Alternative method: 
# my_geometry = myjson.__getitem__('geometry')
my_geometry = myjson['geometry']

json_file = json.dumps(my_geometry, indent=4)

with open(export_folder + &quot;my_request.json&quot;, &quot;w&quot;) as my_json_req:
        my_json_req.write(json_file)

#print(json_file)
</code></pre>
<h3 id="5g-saving-the-response-as-it-is-in-binary-format">5g) Saving the response as it is in binary format</h3>
<ul>
<li>[ ] Another possibility to save the desired JSON file is to export it by reading the data in binary format using the "w" to "b" parameter in the open function. Note that you don't need to import the "json" library as there is nothing to do with the object.</li>
</ul>
<pre><code class="language-python">import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

my_content = mydata.content

with open(export_folder + &quot;my_request.json&quot;, &quot;wb&quot;) as my_json_req:
        my_json_req.write(my_content)

type(my_content)
#print(my_content.hex())
</code></pre>
<pre><code>bytes
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.content</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>bytes</td>
</tr>
</tbody>
</table>
<h2 id="step-6-read-a-json-file-and-display-in-python-interpreter">Step 6) Read a JSON file and display in python interpreter</h2>
<ul>
<li>[ ] You can read and modify saved files by using the "load" or "loads" method of the "json" library. To do this, you need to use "open" function with the "r" mode, which stands for "read".</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

with open(export_folder + &quot;my_request.json&quot;, &quot;r&quot;) as my_json_req:
        json_file = my_json_req.read()

my_object = json.loads(json_file)

my_subset = my_object['geometry']

#print(my_subset)
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>my_object</td>
<td>my_subset</td>
<td></td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict</td>
<td>dict</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>TIP: If you are confused with the dump and load methods, take a look at the image below which explains how to convert json data into python dictionaries or vice a versa.
<img alt="json load and dump methods" src="../images/exr2/json_load_dump.png" /></li>
</ul>
<h2 id="step-7-convert-the-json-request-into-a-program-that-saves-only-properties-to-a-file">Step 7) Convert the JSON request into a program that saves only properties to a file</h2>
<p>Suppose we want to save only the attributes of a desired JSON to a text file without all other attributes.</p>
<p>We can do this easily with loop conditions.</p>
<ul>
<li>[ ] Dictionaries, lists, tuples and sets are iterable data types in Python. So we don't need to do more, because the "myjson" variable is already a python dictionary. Let's change the filtering key with "properties".</li>
</ul>
<pre><code class="language-python">import json
import requests

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

mysubset = myjson['properties']

type(mysubset)
</code></pre>
<pre><code>dict
</code></pre>
<ul>
<li>[ ] Since our data is still in the form of a dictionary, we can easily iterate the "key-value" pairs in a "for" condition like the one below:</li>
</ul>
<pre><code class="language-python">import json
import requests

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

mysubset = myjson['properties']

for prop in mysubset:
    print(prop)
</code></pre>
<pre><code>aktualit
gebnutzbez
funktion
</code></pre>
<ul>
<li>[ ] Now you can use the "for" condition inside the "open" function to save the properties as a list with automatically generated line numbers.</li>
<li>TIP: <code>i=0</code> and <code>i=i+1</code> automatically produces an integer and is casted as string to combine (concatenate) with other strings. Type casting is possible in python with built-in functions such as str(), int(), float(), bool(). </li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

# Replace the URL with your own URL
mydata = requests.get(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

myjson = mydata.json()

mysubset = myjson['properties']

with open(export_folder + &quot;my_request.txt&quot;, &quot;w&quot;) as my_req:
        i=0
        for prop in mysubset:
            i=i+1
            myformat = str(i) + ' : ' + prop + '\n' 
            my_req.write(myformat)            
</code></pre>
<h2 id="step-8-convert-your-code-block-into-a-function-and-let-users-define-their-own-url-requests">Step 8) Convert your code block into a function and let users define their own URL requests</h2>
<ul>
<li>
<p>[ ] You have already entered the URL you want in the code by manually changing the URL part. Now let's make the program more interactive to allow users to define their own URL on each different request. You need to define a function that listens for a user parameter and uses the same parameter in the computations. To do this, you need to use <strong>"def"</strong> which stands for "definition". Move the lines used to transform the data into the function definition using indentation.</p>
</li>
<li>
<p>TIP: In Python programming, you can define multiple variables with the same name. Any variable defined inside a function will only be within the scope of that function. That is, if you declare a variable inside a function, it can only be accessed inside the function. This behavior is called "local scope" (see the "mysubset" variable in the code block below).</p>
</li>
<li>TIP: Defining a function is not enough to run it. If they are defined, you must call the function with mandatory parameters ("custom_url" in the example below.)</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

def get_building_properties(custom_url):
    mydata = requests.get(custom_url)
    myjson = mydata.json()
    mysubset = myjson['properties']
    return mysubset

mysubset = get_building_properties(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

with open(export_folder + &quot;my_request.txt&quot;, &quot;w&quot;) as my_req:
        i=0
        for prop in mysubset:
            i=i+1
            myformat = str(i) + ' : ' + prop + '\n' 
            my_req.write(myformat)
#print (mysubset)
</code></pre>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>myjson</td>
<td>mysubset (local)</td>
<td>mysubset (global)</td>
<td>my_req</td>
<td></td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict</td>
<td>dict</td>
<td>dict</td>
<td>_io.TextIOWrapper</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="8a-seperate-the-listing-mechanism-as-a-function">8a) Seperate the listing mechanism as a function</h3>
<ul>
<li>[ ] We can also turn the code block that saves the file into a function, so that users can more easily determine the file name.<ul>
<li>Note that the first parameter (my_object) of the save_property_as_list function is <strong>required</strong>.</li>
<li>Second parameter (my_file_name) is <strong>optional</strong>, which means that the function will use the default value if it is not defined.</li>
</ul>
</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

def get_building_properties(custom_url):
    mydata = requests.get(custom_url)
    myjson = mydata.json()
    mysubset = myjson['properties']
    return mysubset

def save_property_as_list(my_object, file_name='request.txt'):
    my_file_name = export_folder + file_name
    with open(my_file_name, &quot;w&quot;) as my_req:
        i=0
        for prop in my_object:
            i=i+1
            myformat = str(i) + ' : ' + prop + '\n' 
            my_req.write(myformat)

building_properties = get_building_properties(&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;)

save_property_as_list(building_properties, &quot;my_request.txt&quot;)
</code></pre>
<h3 id="8b-let-the-users-interact-with-your-program-input-function">8b) Let the users interact with your program (input function)</h3>
<ul>
<li>[ ] You can apply the "input" function to turn the code into an interactive program.</li>
</ul>
<pre><code class="language-python">import json
import requests
import os

export_folder = os.path.join('responses','exr2') + os.path.sep

def get_building_properties(custom_url):
    mydata = requests.get(custom_url)
    myjson = mydata.json()
    mysubset = myjson['properties']
    return mysubset

def save_property_as_list(my_object, file_name='request.txt'):
    # We implement an if-elif-else condition to consider empty input.
    if file_name == '':
        my_file_name = export_folder + 'request.txt'
    elif file_name == '-' or file_name == ' ':
        my_file_name = export_folder + 'request.txt'
    else:
        my_file_name = export_folder + file_name

    with open(my_file_name, &quot;w&quot;) as my_req:
        i=0
        for prop in my_object:
            i=i+1
            myformat = str(i) + ' : ' + prop + '\n' 
            my_req.write(myformat)
        print(&quot;List saved as a file :&quot;, my_file_name)
        # print(my_object)

requested_url = input(&quot;Enter the requested URL serves JSON : &quot;)
building_properties = get_building_properties(requested_url)

custom_file_name = str(input(&quot;Specify a file name with extension : &quot;))
save_property_as_list(building_properties, custom_file_name)

# Sample Inputs:
# https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json
# my_request2.txt
</code></pre>
<pre><code>Enter the requested URL serves JSON :  https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json
Specify a file name with extension :


List saved as a file : responses/exr2/request.txt
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>