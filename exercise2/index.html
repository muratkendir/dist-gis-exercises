
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://muratkendir.github.io/dist-gis-exercises/exercise2/">
      
      
        <link rel="prev" href="../exercise1-bns/">
      
      
        <link rel="next" href="../exercise3/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>Exercise 2 (Python Intro) - dist-gis-exercises (Educational Python Notebooks)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9f615399.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction-to-python-with-an-example-app-based-on-geospatial-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dist-gis-exercises (Educational Python Notebooks)" class="md-header__button md-logo" aria-label="dist-gis-exercises (Educational Python Notebooks)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dist-gis-exercises (Educational Python Notebooks)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercise 2 (Python Intro)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://muratkendir.github.io/dist-gis-exercises/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Muratkendir
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dist-gis-exercises (Educational Python Notebooks)" class="md-nav__button md-logo" aria-label="dist-gis-exercises (Educational Python Notebooks)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    dist-gis-exercises (Educational Python Notebooks)
  </label>
  
    <div class="md-nav__source">
      <a href="https://muratkendir.github.io/dist-gis-exercises/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Muratkendir
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../exercise1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 1 (Distributed Sys.)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../exercise1-bns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bonus Exercise (Docker Usage)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Exercise 2 (Python Intro)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Exercise 2 (Python Intro)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-visit-bayernatlas-website" class="md-nav__link">
    Step 1) Visit BayernAtlas website
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-make-a-request-with-python-and-requests-library" class="md-nav__link">
    Step 2) Make a request with Python and "Requests" library
  </a>
  
    <nav class="md-nav" aria-label="Step 2) Make a request with Python and "Requests" library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2a-what-is-happened" class="md-nav__link">
    2a) What is happened?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2b-how-to-work-with-libraries" class="md-nav__link">
    2b) How to work with libraries?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2c-how-to-expose-the-existing-methods-in-a-library" class="md-nav__link">
    2c) How to expose the existing methods in a library?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2d-what-we-got-by-the-request" class="md-nav__link">
    2d) What we got by the request?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-how-to-view-the-content-of-the-response" class="md-nav__link">
    Step 3) How to view the content of the response?
  </a>
  
    <nav class="md-nav" aria-label="Step 3) How to view the content of the response?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3b-optional-open-images-with-pillow" class="md-nav__link">
    3b (optional) Open Images with Pillow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3c-optional-open-images-with-web-browser" class="md-nav__link">
    3c (optional) Open Images with Web Browser
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-what-about-json-xml-html-based-files" class="md-nav__link">
    Step 4) What about JSON / XML / HTML based files?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-how-to-request-json-xml-html-based-files-from-the-web-services" class="md-nav__link">
    Step 5) How to request JSON / XML / HTML based files from the web services?
  </a>
  
    <nav class="md-nav" aria-label="Step 5) How to request JSON / XML / HTML based files from the web services?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5a-inspect-the-response" class="md-nav__link">
    5a) Inspect the response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5b-convert-dictionary-to-text-using-json-library-dumps-method" class="md-nav__link">
    5b) Convert Dictionary to Text using JSON library (dumps method)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5c-convert-text-to-dictionary-using-json-library-loads-method" class="md-nav__link">
    5c) Convert Text to Dictionary using JSON library (loads method)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5d-save-the-json-file" class="md-nav__link">
    5d) Save the JSON file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5e-use-one-of-the-parameters-of-dumps-method-eg-indentation" class="md-nav__link">
    5e) Use one of the parameters of dumps method (e.g. Indentation)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5f-get-a-subset-of-the-dictionary-using-json-library-__getitem__" class="md-nav__link">
    5f) Get a subset of the dictionary using JSON library (__getitem__ / [ ] )
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5g-saving-the-response-as-it-is-in-binary-format" class="md-nav__link">
    5g) Saving the response as it is in binary format
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-read-a-json-file-and-display-in-python-interpreter" class="md-nav__link">
    Step 6) Read a JSON file and display in python interpreter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-convert-the-json-request-into-a-program-that-saves-only-properties-to-a-file" class="md-nav__link">
    Step 7) Convert the JSON request into a program that saves only properties to a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-convert-your-code-block-into-a-function-and-let-users-define-their-own-url-requests" class="md-nav__link">
    Step 8) Convert your code block into a function and let users define their own URL requests
  </a>
  
    <nav class="md-nav" aria-label="Step 8) Convert your code block into a function and let users define their own URL requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8a-seperate-the-listing-mechanism-as-a-function" class="md-nav__link">
    8a) Seperate the listing mechanism as a function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8b-let-the-users-interact-with-your-program-input-function" class="md-nav__link">
    8b) Let the users interact with your program (input function)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../exercise3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 3 (SDIs)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../exercise4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 4 (Web Map)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exercise 5 (Virtualization)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Exercise 5 (Virtualization)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../exercise5_preparation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preparation for Exercise 5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../exercise5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 5
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../samples_for_discussion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OGC Service Samples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../essentials_of_web_mapping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Essentials of Web Mapping
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virtual Env. Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Virtual Env. Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../install_w_pip_on_win/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows w PIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../install_w_pip_on_lnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux w PIP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../ogc_services_samples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sample OGC Services
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-1-visit-bayernatlas-website" class="md-nav__link">
    Step 1) Visit BayernAtlas website
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-make-a-request-with-python-and-requests-library" class="md-nav__link">
    Step 2) Make a request with Python and "Requests" library
  </a>
  
    <nav class="md-nav" aria-label="Step 2) Make a request with Python and "Requests" library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2a-what-is-happened" class="md-nav__link">
    2a) What is happened?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2b-how-to-work-with-libraries" class="md-nav__link">
    2b) How to work with libraries?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2c-how-to-expose-the-existing-methods-in-a-library" class="md-nav__link">
    2c) How to expose the existing methods in a library?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2d-what-we-got-by-the-request" class="md-nav__link">
    2d) What we got by the request?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-how-to-view-the-content-of-the-response" class="md-nav__link">
    Step 3) How to view the content of the response?
  </a>
  
    <nav class="md-nav" aria-label="Step 3) How to view the content of the response?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3b-optional-open-images-with-pillow" class="md-nav__link">
    3b (optional) Open Images with Pillow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3c-optional-open-images-with-web-browser" class="md-nav__link">
    3c (optional) Open Images with Web Browser
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-what-about-json-xml-html-based-files" class="md-nav__link">
    Step 4) What about JSON / XML / HTML based files?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-how-to-request-json-xml-html-based-files-from-the-web-services" class="md-nav__link">
    Step 5) How to request JSON / XML / HTML based files from the web services?
  </a>
  
    <nav class="md-nav" aria-label="Step 5) How to request JSON / XML / HTML based files from the web services?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5a-inspect-the-response" class="md-nav__link">
    5a) Inspect the response
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5b-convert-dictionary-to-text-using-json-library-dumps-method" class="md-nav__link">
    5b) Convert Dictionary to Text using JSON library (dumps method)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5c-convert-text-to-dictionary-using-json-library-loads-method" class="md-nav__link">
    5c) Convert Text to Dictionary using JSON library (loads method)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5d-save-the-json-file" class="md-nav__link">
    5d) Save the JSON file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5e-use-one-of-the-parameters-of-dumps-method-eg-indentation" class="md-nav__link">
    5e) Use one of the parameters of dumps method (e.g. Indentation)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5f-get-a-subset-of-the-dictionary-using-json-library-__getitem__" class="md-nav__link">
    5f) Get a subset of the dictionary using JSON library (__getitem__ / [ ] )
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5g-saving-the-response-as-it-is-in-binary-format" class="md-nav__link">
    5g) Saving the response as it is in binary format
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-6-read-a-json-file-and-display-in-python-interpreter" class="md-nav__link">
    Step 6) Read a JSON file and display in python interpreter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-7-convert-the-json-request-into-a-program-that-saves-only-properties-to-a-file" class="md-nav__link">
    Step 7) Convert the JSON request into a program that saves only properties to a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-8-convert-your-code-block-into-a-function-and-let-users-define-their-own-url-requests" class="md-nav__link">
    Step 8) Convert your code block into a function and let users define their own URL requests
  </a>
  
    <nav class="md-nav" aria-label="Step 8) Convert your code block into a function and let users define their own URL requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#8a-seperate-the-listing-mechanism-as-a-function" class="md-nav__link">
    8a) Seperate the listing mechanism as a function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8b-let-the-users-interact-with-your-program-input-function" class="md-nav__link">
    8b) Let the users interact with your program (input function)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="introduction-to-python-with-an-example-app-based-on-geospatial-data">Introduction to Python with an Example App Based on Geospatial Data</h1>
<p><img align="right" width=190 height=100 src="../images/TUM_Logo_blau_rgb_p.png"/></p>
<blockquote>
Murat Kendir, Prof. Thomas Kolbe || Chair of Geoinformatics, TUM || murat.kendir@tum.de
</blockquote>

<ul>
<li>In the previous exercise we explored the BayernAtlas website and experienced the data services and interactions behind the web interface by using Web Developer Tool.</li>
<li>In this exercise, you will learn how to access similar data sources (web services) and manage the data using some simple Python codes.</li>
<li>However, before starting this exercise you need to know more about the datasets and how to access it.</li>
</ul>
<h2 id="step-1-visit-bayernatlas-website">Step 1) Visit <a href="https://geoportal.bayern.de/bayernatlas">BayernAtlas</a> website</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Open the "web developer tool" by pressing Ctrl+Shift+C (or Ctrl+Shift+I) or by finding the tool in the browser menu.</li>
<li class="task-list-item"><input type="checkbox"/> Select a background map at any specific location on the map.</li>
<li class="task-list-item"><input type="checkbox"/> Check the URL of a raster image taken as a base map from the BayernAtlas website.</li>
<li class="task-list-item"><input type="checkbox"/> Copy the URL and try requesting this image by pasting the URL into the address bar.</li>
<li class="task-list-item"><input type="checkbox"/> or you can test the URL using the "curl" program at the command prompt (CMD / Eingabeaufforderung).
<img alt="BayernAtlas Basemap Request Sample" src="../images/exr2/bayernatlas_wmts_image.png" /></li>
</ul>
<h2 id="step-2-make-a-request-with-python-and-requests-library">Step 2) Make a request with Python and "Requests" library</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Start a text editor (Notepad, Notepad++, SublimeText) or an IDE (Idle, Spyder, PyCharm)</li>
<li class="task-list-item"><input type="checkbox"/> Write the following code in the editor and save it as a file with .PY extension.</li>
<li>Tip: Enable file extensions in Windows Explorer to view all file extensions.<ul>
<li><a href="https://fileinfo.com/help/windows_10_show_file_extensions">how to enable file extensions (in english)</a></li>
<li><a href="https://www.giga.de/tipp/windows-10-und-11-dateiendungen-anzeigen-so-gehts/#windows_10_dateiendungen_einblenden">how to enable file extensions (in german)</a></li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox"/> Open command prompt (Eingabeaufforderung) and navigate to the same folder as your python file. Execute the file by typing <code>python MY_PYTHON_CODE.py</code> (or type in <code>python3 MY_PYTHON_CODE.py</code> in Linux systems)</li>
<li class="task-list-item"><input type="checkbox"/> Try running python within <strong>interactive</strong> mode by typing <code>python --interactive MY_PYTHON_CODE.py</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Import the native &quot;requests&quot; library to send a request to the web source.</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># Replace the URL in the follwoing code with your selected URL</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://intergeo33.bayernwolke.de/betty/c_hist/13/4197/4598&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1">#Check what the &quot;mydata&quot; object.</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">mydata</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;Response [200]&gt;
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
</tr>
<tr>
<td><strong>Data Type</strong></td>
<td>requests.models.Response</td>
</tr>
</tbody>
</table>
<h3 id="2a-what-is-happened">2a) What is happened?</h3>
<ul>
<li><code>import requests</code> imported the library named "requests". This library is a simple HTTP library supports all the methods available in the HTTP protocol such as GET, POST, DELETE etc.</li>
<li><code>mydata =</code> defines a variable and assigns it to the following object.</li>
<li><code>requests.get()</code> calls a method in the requests library.</li>
</ul>
<blockquote>
<p>When a class (e.g. requests) contains functions (e.g. get) defined for the class itself, these functions are called "methods". </p>
</blockquote>
<ul>
<li><code>print(mydata)</code> represents the content of the returned object.</li>
</ul>
<h3 id="2b-how-to-work-with-libraries">2b) How to work with libraries?</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Find and explore the documentation pages available on the Internet. <a href="https://requests.readthedocs.io/en/latest/user/quickstart/">requests doc</a></li>
<li>Tip: You can use package repositories to find links to documentation pages. <a href="https://pypi.org/project/requests/">Python Package Installer site</a></li>
<li class="task-list-item"><input type="checkbox"/> Use the help() function to read the summarized documentation about the requests library. Type (<code>help(requests)</code>) and run the code.</li>
</ul>
<h3 id="2c-how-to-expose-the-existing-methods-in-a-library">2c) How to expose the existing methods in a library?</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> In Python, everything is considered an object and each object can be examined by predefined functions such as type, dir, help etc. These predefined functions are called  "Built-ins" and can be listed by typing <code>dir(__builtins__)</code></li>
<li class="task-list-item"><input type="checkbox"/> Since the requests class is also considered an object you can follow the same procedure to expose existing methods for this class. Type <code>dir(requests)</code></li>
<li class="task-list-item"><input type="checkbox"/> Note that standard HTTP methods (get, post, put, delete etc.) area available in the list.</li>
</ul>
<h3 id="2d-what-we-got-by-the-request">2d) What we got by the request?</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> If you need to learn more about the data you received with the request, use the following functions:</li>
<li class="task-list-item"><input type="checkbox"/> <code>help(mydata)</code></li>
<li class="task-list-item"><input type="checkbox"/> <code>type(mydata)</code></li>
<li class="task-list-item"><input type="checkbox"/> <code>dir(mydata)</code></li>
<li>Note that if you are using an IDE to code you may have some useful tools to represent the information of variables. Check Spyder or PyCharm or Visual Studio Code IDE's.</li>
<li class="task-list-item"><input type="checkbox"/> You can also examine the hierarchical structure of the "requests" class imported with the library.</li>
<li class="task-list-item"><input type="checkbox"/> Try to find requests.models.Response with "dir" function:<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> dir(requests)</li>
<li class="task-list-item"><input type="checkbox"/> dir(requests.models)</li>
<li class="task-list-item"><input type="checkbox"/> dir(requests.models.Response)</li>
<li>Note that the class names must be spelled exactly the same, because the python interpreter (the interactive compiler running at the backgorund) is <strong>case-sensitive</strong>. (e.g. <code>dir(requests.models.response)</code> would not work.)</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox"/> If you followed the commands you might notice that the variable "mydata" is an instance object of the class "requests.models.Response". You can check it with the function <code>isinstance(my_object, (class_name))</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">print</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mydata</span><span class="p">,</span> <span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Response</span><span class="p">)))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>True
</code></pre></div>
<h2 id="step-3-how-to-view-the-content-of-the-response">Step 3) How to view the content of the response?</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> If you type <code>dir(mydata)</code> again, you can see all available methods to reveal the content of the object. <ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Try to reveal the content by typing <code>print( mydata.content )</code></li>
<li class="task-list-item"><input type="checkbox"/> or by typing <code>print( mydata.text )</code></li>
<li>Note that because the file is an image file in binary format, the content is displayed as strings that are not human readable.</li>
</ul>
</li>
<li>TIP: You can follow different tactics to view an image file in python. A standard library (native library) called "webbrowser" can call a minimal browser and display the image inside the browser. Another method would be import the "Image" class from the "PIL" library. To import this class, you can add <code>from PIL import Image</code> at the beginning of your code block. Since "PIL" is not a native python library, you may need to install it on your environment using (<code>pip install Pillow</code>)</li>
<li class="task-list-item"><input type="checkbox"/> For now we will just save the image file in the same folder using the following code:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;responses/exr2/my_requested_image.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_image_file</span><span class="p">:</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>        <span class="n">my_image_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">mydata</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>File might be saved, check the folder: responses/exr2
</code></pre></div>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> "open" is another built-in function in pyhton. It needs the filename as the first parameter and the file mode as the second parameter. If you want to learn more about the "file mode", visit this page: <a href="https://realpython.com/read-write-files-python/">Real Python</a> or type <code>help(open)</code> in the python interpreter.</li>
<li class="task-list-item"><input type="checkbox"/> We need to set the default export directory as relative path. To make these relative paths compatible with different operating systems (OS), the directory separator must be detected and replaced regarding to the current OS. A native python library "os" has such classes (<strong>os.path.sep</strong> and <strong>os.path.join</strong>) that makes it easy to implement.</li>
</ul>
<p>TIP: The reason for using "open" function via "with" is that the file should be closed after the manipulation. In the past, developers were often used the "close" function after every file manipulation. There is no need to use this file condition test when using "with" phrase.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="c1"># Detect the current OS and change the relative paths regarding to it.</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1">#print(export_folder)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="c1"># Replace the URL in the follwing code with your selected URL</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://intergeo33.bayernwolke.de/betty/c_hist/13/4197/4598&quot;</span><span class="p">)</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_requested_image.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_image_file</span><span class="p">:</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    <span class="n">my_image_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">mydata</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File might be saved, check the folder: responses/exr2&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>File might be saved, check the folder: responses/exr2
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.content</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>bytes (binary)</td>
</tr>
</tbody>
</table>
<p>TIP: You may notice that the last line (<code>my_image_file.write(mydata.content)</code>) does not contain any parentheses or curly braces to highlight the inner code block. This is because parentheses and curly brackets are not used in the python programming language to do that. You need to use indentation to create a hierarchical programming style (e.g. conditional statements, functions, loops, etc.). Indentation usually consists of 4 space characters, but it can also be customized (e.g. You can use 3 spaces or TAB chacracter). Also note that a column (:) character is needed at the end of the last line before the indented lines.</p>
<p>An example comparison between C and Python programming languages shows how indentation interpreted in python:
<img alt="PythonvsC" src="../images/exr2/py_vs_c_identation.png" /></p>
<h3 id="3b-optional-open-images-with-pillow">3b (optional) Open Images with Pillow</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> You can show up the saved image using "PIL" (Pillow) library by running following code.</li>
<li>TIP : If you are calling the "PIL" library for the first time in your local environment, you may need to install it with <code>pip install pillow</code> command.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="n">requested_image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_requested_image.jpg&quot;</span><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="n">display</span><span class="p">(</span><span class="n">requested_image</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../output_23_0.png" /></p>
<h3 id="3c-optional-open-images-with-web-browser">3c (optional) Open Images with Web Browser</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> If you are running this notebook in your local environment, you can open the image on your default web browser by using the native python library "webbrowser". Try to execute following code.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">import</span> <span class="nn">webbrowser</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_requested_image.jpg&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>True
</code></pre></div>
<h2 id="step-4-what-about-json-xml-html-based-files">Step 4) What about JSON / XML / HTML based files?</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Let's find another web service that offers JSON or GML based data files and follow similar instructions to save this data on our local machine or python environment. Visit following web page:<ul>
<li><a href="https://www.ldproxy.nrw.de/kataster">Basic geospatial data of the official surveying system in North Rhine-Westphalia</a> (Geobasisdaten des amtlichen Vermessungswesens in Nordrhein-Westfalen
)</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox"/> Select one of the "collection"s (Landparcel/Flurstück, Building/Gebaeude or Administrative Unit/Verwaltungseinheit). </li>
<li class="task-list-item"><input type="checkbox"/> Select one of the features in the list and click on the JSON link at top right side of the page. If the data looks like too complex, try finding and installing a JSON viewer/parser add-on/extension for your browser.<ul>
<li>TIP: It is recommended to search for "JSON Lite" in Firefox, "JSON-Handle" or "JSON Viewer Pro" in Chrome browser.</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox"/> Check also the GML file on the same page (Top-right). You can also find some useful add-ons/extensions to visualize XML based files in a "more human-readable way", often called  "pretty-print" style.<ul>
<li>TIP: It is recommended to search for "Pretty XML" in Firefox, "XML Plus" in Chrome browser.</li>
<li>TIP: If the browser cannot open the GML/XML file in a new tab, then you can save the file on your local machine and open it by using web browser ( Right Click --&gt; Open with ).</li>
</ul>
</li>
</ul>
<p>Here you will see different visualizations of JSON or XML files within these extensions:</p>
<p><img alt="JSON or XML Visualizations" src="../images/exr2/browser_addons.png" /></p>
<h2 id="step-5-how-to-request-json-xml-html-based-files-from-the-web-services">Step 5) How to request JSON / XML / HTML based files from the web services?</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Remove the last two lines from your code block or convert them into comment by adding hashtag (#) to the beginning of lines. (Keyboard Shortcut: Ctrl + / )</li>
<li class="task-list-item"><input type="checkbox"/> Copy and paste the requested URL in previous step (4) into your code block.</li>
<li class="task-list-item"><input type="checkbox"/> Add the lines <code>myjson = mydata.json()</code> and <code>print(myjson)</code> just after the requested URL.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="c1">#print(myjson)</span>
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.json()</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict(Python Dictionary)</td>
</tr>
</tbody>
</table>
<h3 id="5a-inspect-the-response">5a) Inspect the response</h3>
<p>Here you have As you may notice, it was not actually converted into a JSON object, but is now a "<strong>JSON serializable Python object</strong>". In general terms it has been converted into a "<strong>python dictionary</strong>" object. JSON stands for Java Script Object Notation and is designed to provide a more developer-friendly alternative to XML. If you would select a most python-native encoding format, that would be none of these, but YAML. However, YAML format is out of our focus for this exercise. That is, it is a natural data exchange format designed for JavaScript, but not for Python. Python uses predefined data types such as tuples, lists and the most JSON-like format "dictionary" to handle the same data internally. The given code part has converted the response object to a JSON by using a method of requests.get, but ...</p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Is it really JSON?<ul>
<li>Type <code>type(myjson)</code></li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox"/> What are available methods or attributes for this instance object?<ul>
<li>Type <code>dir(myjson)</code></li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox"/> How can we use these available methods with this instance?<ul>
<li>Type <code>help(myjson)</code></li>
<li>or get the help document for a specific method (e.g. <code>help(myjson.items)</code>)</li>
</ul>
</li>
</ul>
<p>TIP: If you would select a most python-native encoding format, that would be none of these, but <strong>YAML</strong>. Since, the YAML format is out of our focus for this exercise, we didn't mention about that yet.</p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> If you try to save the python dictionary object to a file, you will notice an error.
<code>with open("responses/exr2/my_request.json", "w") as my_json_request:</code></li>
</ul>
<p><code>my_json_request.write(myjson)</code></p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> However, you can change the "json()" method with "text" method and save the file as received like in the example below.<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Alternatively, you can cast (convert the data type) the dictionary type to a string using the built-in function <strong>str()</strong>.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="c1"># Alternative method:</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="c1"># text_file = str(mydata)</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="n">text_file</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">text</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_req</span><span class="p">:</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>         <span class="n">my_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text_file</span><span class="p">)</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="c1">#print(text_file)</span>
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.text</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>str (String)</td>
</tr>
</tbody>
</table>
<h3 id="5b-convert-dictionary-to-text-using-json-library-dumps-method">5b) Convert Dictionary to Text using JSON library (dumps method)</h3>
<p>When this method is applied, ‘text_file’ is assumed to be just a dumped json file and is saved with the file extension ‘.json’. So it is currently no different from a normal text file. By importing the ‘json’ library, we will get more functionality within our data, such as filtering, sorting, re-indenting, etc.</p>
<ul class="task-list">
<li class="task-list-item">
<p><input type="checkbox"/> To do this, you need to import the native library called "json". Add the line at the beginning of code block: <code>import json</code></p>
</li>
<li class="task-list-item">
<p><input type="checkbox"/> Then use <code>json.dumps</code> to convert the dictionary to a string. </p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="n">json_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">myjson</span><span class="p">)</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="nb">type</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>str
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.json()</td>
<td>json_file</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict</td>
<td>str</td>
</tr>
</tbody>
</table>
<h3 id="5c-convert-text-to-dictionary-using-json-library-loads-method">5c) Convert Text to Dictionary using JSON library (loads method)</h3>
<p>What if you had a text file instead of a python dictionary? Can you convert a text file to a JSON file?
- [ ] If the response text is in regular JSON format, you can convert it to a dictionary using the <strong>loads</strong> method of the json library (see below).
- If not, the json parser will throw an error and you may need to use additional string functions such as rstrip, lstrip, replace to fix the problem in the text. You can also browse <a href="https://www.w3schools.com/python/python_ref_string.asp">this web page</a> for python string methods.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">text</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="n">my_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">myjson</span><span class="p">)</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="nb">type</span><span class="p">(</span><span class="n">my_object</span><span class="p">)</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="c1">#print(my_object.get(&#39;links&#39;))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>dict
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>myjson</td>
<td>my_object</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>str</td>
<td>dict</td>
</tr>
</tbody>
</table>
<h3 id="5d-save-the-json-file">5d) Save the JSON file</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Now, you can copy the JSON file to our local machine by using "with" statement.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="n">json_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">myjson</span><span class="p">)</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_json_req</span><span class="p">:</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>        <span class="n">my_json_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="c1">#print(json_file)</span>
</code></pre></div>
<h3 id="5e-use-one-of-the-parameters-of-dumps-method-eg-indentation">5e) Use one of the parameters of dumps method (e.g. Indentation)</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Try using some of the available parameters of "json.dumps" method. (for exp. "indent")<ul>
<li>To see all available parameters for the dumps method, type <code>help(json.dumps)</code>.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="n">json_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">myjson</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_json_req</span><span class="p">:</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>        <span class="n">my_json_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="c1">#print(json_file)</span>
</code></pre></div>
<h3 id="5f-get-a-subset-of-the-dictionary-using-json-library-__getitem__">5f) Get a subset of the dictionary using JSON library (__getitem__ / [ ] )</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Python dictionaries can be filtered by defining keys. ('geometry' in the sample below)<ul>
<li>Note that <code>myjson['geometry']</code> and <code>myjson.__getitem__('geometry')</code> will produce the same results.</li>
<li>The reason is square brakets [] are the shortcuts to the __getitem__ method and such shortcut mechanisms are called "magic methods" in Python. See <a href="https://devopedia.org/magic-methods-in-python">this web page</a> see more examples for the magic methods.</li>
<li>You can type <code>help(myjson.__getitem__)</code> to expose the usage of the magic method.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="c1"># Alternative method: </span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="c1"># my_geometry = myjson.__getitem__(&#39;geometry&#39;)</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="n">my_geometry</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="n">json_file</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">my_geometry</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_json_req</span><span class="p">:</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>        <span class="n">my_json_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="c1">#print(json_file)</span>
</code></pre></div>
<h3 id="5g-saving-the-response-as-it-is-in-binary-format">5g) Saving the response as it is in binary format</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Another possibility to save the desired JSON file is to export it by reading the data in binary format using the "w" to "b" parameter in the open function. Note that you don't need to import the "json" library as there is nothing to do with the object.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="n">my_content</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">content</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.json&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_json_req</span><span class="p">:</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>        <span class="n">my_json_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">my_content</span><span class="p">)</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="nb">type</span><span class="p">(</span><span class="n">my_content</span><span class="p">)</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="c1">#print(my_content.hex())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>bytes
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>mydata.content</td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>bytes</td>
</tr>
</tbody>
</table>
<h2 id="step-6-read-a-json-file-and-display-in-python-interpreter">Step 6) Read a JSON file and display in python interpreter</h2>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> You can read and modify saved files by using the "load" or "loads" method of the "json" library. To do this, you need to use "open" function with the "r" mode, which stands for "read".</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_json_req</span><span class="p">:</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>        <span class="n">json_file</span> <span class="o">=</span> <span class="n">my_json_req</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">my_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="n">my_subset</span> <span class="o">=</span> <span class="n">my_object</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="c1">#print(my_subset)</span>
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>my_object</td>
<td>my_subset</td>
<td></td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict</td>
<td>dict</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>TIP: If you are confused with the dump and load methods, take a look at the image below which explains how to convert json data into python dictionaries or vice a versa.
<img alt="json load and dump methods" src="../images/exr2/json_load_dump.png" /></li>
</ul>
<h2 id="step-7-convert-the-json-request-into-a-program-that-saves-only-properties-to-a-file">Step 7) Convert the JSON request into a program that saves only properties to a file</h2>
<p>Suppose we want to save only the attributes of a desired JSON to a text file without all other attributes.</p>
<p>We can do this easily with loop conditions.</p>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Dictionaries, lists, tuples and sets are iterable data types in Python. So we don't need to do more, because the "myjson" variable is already a python dictionary. Let's change the filtering key with "properties".</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">mysubset</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="nb">type</span><span class="p">(</span><span class="n">mysubset</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>dict
</code></pre></div>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Since our data is still in the form of a dictionary, we can easily iterate the "key-value" pairs in a "for" condition like the one below:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="n">mysubset</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">mysubset</span><span class="p">:</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>aktualit
gebnutzbez
funktion
</code></pre></div>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> Now you can use the "for" condition inside the "open" function to save the properties as a list with automatically generated line numbers.</li>
<li>TIP: <code>i=0</code> and <code>i=i+1</code> automatically produces an integer and is casted as string to combine (concatenate) with other strings. Type casting is possible in python with built-in functions such as str(), int(), float(), bool(). </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="c1"># Replace the URL with your own URL</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="n">mysubset</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_req</span><span class="p">:</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>        <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">mysubset</span><span class="p">:</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>            <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>            <span class="n">myformat</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; : &#39;</span> <span class="o">+</span> <span class="n">prop</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> 
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>            <span class="n">my_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">myformat</span><span class="p">)</span>            
</code></pre></div>
<h2 id="step-8-convert-your-code-block-into-a-function-and-let-users-define-their-own-url-requests">Step 8) Convert your code block into a function and let users define their own URL requests</h2>
<ul class="task-list">
<li class="task-list-item">
<p><input type="checkbox"/> You have already entered the URL you want in the code by manually changing the URL part. Now let's make the program more interactive to allow users to define their own URL on each different request. You need to define a function that listens for a user parameter and uses the same parameter in the computations. To do this, you need to use <strong>"def"</strong> which stands for "definition". Move the lines used to transform the data into the function definition using indentation.</p>
</li>
<li>
<p>TIP: In Python programming, you can define multiple variables with the same name. Any variable defined inside a function will only be within the scope of that function. That is, if you declare a variable inside a function, it can only be accessed inside the function. This behavior is called "local scope" (see the "mysubset" variable in the code block below).</p>
</li>
<li>TIP: Defining a function is not enough to run it. If they are defined, you must call the function with mandatory parameters ("custom_url" in the example below.)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="k">def</span> <span class="nf">get_building_properties</span><span class="p">(</span><span class="n">custom_url</span><span class="p">):</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">custom_url</span><span class="p">)</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    <span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>    <span class="n">mysubset</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>    <span class="k">return</span> <span class="n">mysubset</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="n">mysubset</span> <span class="o">=</span> <span class="n">get_building_properties</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_folder</span> <span class="o">+</span> <span class="s2">&quot;my_request.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_req</span><span class="p">:</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>        <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">mysubset</span><span class="p">:</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>            <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>            <span class="n">myformat</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; : &#39;</span> <span class="o">+</span> <span class="n">prop</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> 
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>            <span class="n">my_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">myformat</span><span class="p">)</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="c1">#print (mysubset)</span>
</code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Variable Name</strong></td>
<td>mydata</td>
<td>myjson</td>
<td>mysubset (local)</td>
<td>mysubset (global)</td>
<td>my_req</td>
<td></td>
</tr>
<tr>
<td><strong>Variable Type</strong></td>
<td>requests.models.Response</td>
<td>dict</td>
<td>dict</td>
<td>dict</td>
<td>_io.TextIOWrapper</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="8a-seperate-the-listing-mechanism-as-a-function">8a) Seperate the listing mechanism as a function</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> We can also turn the code block that saves the file into a function, so that users can more easily determine the file name.<ul>
<li>Note that the first parameter (my_object) of the save_property_as_list function is <strong>required</strong>.</li>
<li>Second parameter (my_file_name) is <strong>optional</strong>, which means that the function will use the default value if it is not defined.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="k">def</span> <span class="nf">get_building_properties</span><span class="p">(</span><span class="n">custom_url</span><span class="p">):</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>    <span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">custom_url</span><span class="p">)</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>    <span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    <span class="n">mysubset</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>    <span class="k">return</span> <span class="n">mysubset</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="k">def</span> <span class="nf">save_property_as_list</span><span class="p">(</span><span class="n">my_object</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;request.txt&#39;</span><span class="p">):</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    <span class="n">my_file_name</span> <span class="o">=</span> <span class="n">export_folder</span> <span class="o">+</span> <span class="n">file_name</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">my_file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_req</span><span class="p">:</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>        <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">my_object</span><span class="p">:</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>            <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>            <span class="n">myformat</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; : &#39;</span> <span class="o">+</span> <span class="n">prop</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> 
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>            <span class="n">my_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">myformat</span><span class="p">)</span>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="n">building_properties</span> <span class="o">=</span> <span class="n">get_building_properties</span><span class="p">(</span><span class="s2">&quot;https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json&quot;</span><span class="p">)</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="n">save_property_as_list</span><span class="p">(</span><span class="n">building_properties</span><span class="p">,</span> <span class="s2">&quot;my_request.txt&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="8b-let-the-users-interact-with-your-program-input-function">8b) Let the users interact with your program (input function)</h3>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox"/> You can apply the "input" function to turn the code into an interactive program.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kn">import</span> <span class="nn">requests</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="n">export_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;responses&#39;</span><span class="p">,</span><span class="s1">&#39;exr2&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="k">def</span> <span class="nf">get_building_properties</span><span class="p">(</span><span class="n">custom_url</span><span class="p">):</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">mydata</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">custom_url</span><span class="p">)</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>    <span class="n">myjson</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>    <span class="n">mysubset</span> <span class="o">=</span> <span class="n">myjson</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>    <span class="k">return</span> <span class="n">mysubset</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="k">def</span> <span class="nf">save_property_as_list</span><span class="p">(</span><span class="n">my_object</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s1">&#39;request.txt&#39;</span><span class="p">):</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>    <span class="c1"># We implement an if-elif-else condition to consider empty input.</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>    <span class="k">if</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>        <span class="n">my_file_name</span> <span class="o">=</span> <span class="n">export_folder</span> <span class="o">+</span> <span class="s1">&#39;request.txt&#39;</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>    <span class="k">elif</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span> <span class="ow">or</span> <span class="n">file_name</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>        <span class="n">my_file_name</span> <span class="o">=</span> <span class="n">export_folder</span> <span class="o">+</span> <span class="s1">&#39;request.txt&#39;</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>        <span class="n">my_file_name</span> <span class="o">=</span> <span class="n">export_folder</span> <span class="o">+</span> <span class="n">file_name</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">my_file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">my_req</span><span class="p">:</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>        <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">my_object</span><span class="p">:</span>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>            <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>            <span class="n">myformat</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; : &#39;</span> <span class="o">+</span> <span class="n">prop</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> 
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>            <span class="n">my_req</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">myformat</span><span class="p">)</span>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;List saved as a file :&quot;</span><span class="p">,</span> <span class="n">my_file_name</span><span class="p">)</span>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>        <span class="c1"># print(my_object)</span>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="n">requested_url</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the requested URL serves JSON : &quot;</span><span class="p">)</span>
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="n">building_properties</span> <span class="o">=</span> <span class="n">get_building_properties</span><span class="p">(</span><span class="n">requested_url</span><span class="p">)</span>
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a><span class="n">custom_file_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Specify a file name with extension : &quot;</span><span class="p">))</span>
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="n">save_property_as_list</span><span class="p">(</span><span class="n">building_properties</span><span class="p">,</span> <span class="n">custom_file_name</span><span class="p">)</span>
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a>
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="c1"># Sample Inputs:</span>
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="c1"># https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json</span>
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a><span class="c1"># my_request2.txt</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Enter the requested URL serves JSON :  https://www.ldproxy.nrw.de/kataster/collections/gebaeudebauwerk/items/DENW42AL1000NmHjBL?f=json
Specify a file name with extension :


List saved as a file : responses/exr2/request.txt
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>